import{d as Ae,a as Q,f as ke,l as He}from"../chunks/evqNsAuA.js";import{i as Vn}from"../chunks/DuB2e-FJ.js";import{a as At,o as nn}from"../chunks/DzJOUywm.js";import{U as qi,h as Je,a2 as jn,a as Yi,K as Jn,J as Zn,o as m,ak as ae,ae as Qn,M as $n,W as Pa,a6 as Xi,e as li,L as es,ab as ts,T as Ba,c as bt,b as aa,s as is,aU as sn,a9 as ha,aI as as,E as Ia,aD as de,aV as ns,aW as ss,aX as rs,aY as qe,r as rn,p as on,aZ as Ui,H as os,a4 as ls,a_ as cs,a8 as hs,d as us,af as ms,i as p,F as ua,q as S,a$ as gs,b0 as ln,aF as ds,b1 as fs,b2 as Oa,b3 as cn,w as lt,u as I,x as he,b4 as ma,z as ct,A as ce,B as ne,am as te,b5 as Dt,b6 as ps,b7 as Ge,C as U,V as vs,y as ci,aG as _s,b8 as ks,b9 as ys}from"../chunks/CtJpalYE.js";import{s as hi}from"../chunks/BYZqiMOW.js";import{p as O,r as Rt,b as na,i as le}from"../chunks/D9bIpDaT.js";import{s as ga,b as Ss,r as Cs,c as La,a as Ga}from"../chunks/xFqaptkl.js";function ui(a,e){return e}function ws(a,e,t){for(var i=[],n=e.length,s,r=e.length,o=0;o<n;o++){let g=e[o];on(g,()=>{if(s){if(s.pending.delete(g),s.done.add(g),s.pending.size===0){var c=a.outrogroups;sa(ha(s.done)),c.delete(s),c.size===0&&(a.outrogroups=null)}}else r-=1},!1)}if(r===0){var l=i.length===0&&t!==null;if(l){var h=t,u=h.parentNode;hs(u),u.append(h),a.items.clear()}sa(e,!l)}else s={pending:new Set(e),done:new Set},(a.outrogroups??=new Set).add(s)}function sa(a,e=!0){for(var t=0;t<a.length;t++)us(a[t],e)}var Na;function mi(a,e,t,i,n,s=null){var r=a,o=new Map,l=(e&sn)!==0;if(l){var h=a;r=Je?qi(jn(h)):h.appendChild(Yi())}Je&&Jn();var u=null,g=ae(()=>{var E=t();return as(E)?E:E==null?[]:ha(E)}),c,k=!0;function f(){v.fallback=u,bs(v,c,r,e,i),u!==null&&(c.length===0?(u.f&qe)===0?rn(u):(u.f^=qe,Xt(u,null,r)):on(u,()=>{u=null}))}var w=Zn(()=>{c=m(g);var E=c.length;let J=!1;if(Je){var ee=Qn(r)===$n;ee!==(E===0)&&(r=Pa(),qi(r),Xi(!1),J=!0)}for(var B=new Set,D=bt,se=is(),N=0;N<E;N+=1){Je&&li.nodeType===es&&li.data===ts&&(r=li,J=!0,Xi(!1));var K=c[N],re=i(K,N),z=k?null:o.get(re);z?(z.v&&Ba(z.v,K),z.i&&Ba(z.i,N),se&&D.skipped_effects.delete(z.e)):(z=Ts(o,k?r:Na??=Yi(),K,re,N,n,e,t),k||(z.e.f|=qe),o.set(re,z)),B.add(re)}if(E===0&&s&&!u&&(k?u=aa(()=>s(r)):(u=aa(()=>s(Na??=Yi())),u.f|=qe)),Je&&E>0&&qi(Pa()),!k)if(se){for(const[fe,_e]of o)B.has(fe)||D.skipped_effects.add(_e.e);D.oncommit(f),D.ondiscard(()=>{})}else f();J&&Xi(!0),m(g)}),v={effect:w,items:o,outrogroups:null,fallback:u};k=!1,Je&&(r=li)}function bs(a,e,t,i,n){var s=(i&cs)!==0,r=e.length,o=a.items,l=a.effect.first,h,u=null,g,c=[],k=[],f,w,v,E;if(s)for(E=0;E<r;E+=1)f=e[E],w=n(f,E),v=o.get(w).e,(v.f&qe)===0&&(v.nodes?.a?.measure(),(g??=new Set).add(v));for(E=0;E<r;E+=1){if(f=e[E],w=n(f,E),v=o.get(w).e,a.outrogroups!==null)for(const z of a.outrogroups)z.pending.delete(v),z.done.delete(v);if((v.f&qe)!==0)if(v.f^=qe,v===l)Xt(v,null,t);else{var J=u?u.next:l;v===a.effect.last&&(a.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),Ve(a,u,v),Ve(a,v,J),Xt(v,J,t),u=v,c=[],k=[],l=u.next;continue}if((v.f&Ui)!==0&&(rn(v),s&&(v.nodes?.a?.unfix(),(g??=new Set).delete(v))),v!==l){if(h!==void 0&&h.has(v)){if(c.length<k.length){var ee=k[0],B;u=ee.prev;var D=c[0],se=c[c.length-1];for(B=0;B<c.length;B+=1)Xt(c[B],ee,t);for(B=0;B<k.length;B+=1)h.delete(k[B]);Ve(a,D.prev,se.next),Ve(a,u,D),Ve(a,se,ee),l=ee,u=se,E-=1,c=[],k=[]}else h.delete(v),Xt(v,l,t),Ve(a,v.prev,v.next),Ve(a,v,u===null?a.effect.first:u.next),Ve(a,u,v),u=v;continue}for(c=[],k=[];l!==null&&l!==v;)(h??=new Set).add(l),k.push(l),l=l.next;if(l===null)continue}(v.f&qe)===0&&c.push(v),u=v,l=v.next}if(a.outrogroups!==null){for(const z of a.outrogroups)z.pending.size===0&&(sa(ha(z.done)),a.outrogroups?.delete(z));a.outrogroups.size===0&&(a.outrogroups=null)}if(l!==null||h!==void 0){var N=[];if(h!==void 0)for(v of h)(v.f&Ui)===0&&N.push(v);for(;l!==null;)(l.f&Ui)===0&&l!==a.fallback&&N.push(l),l=l.next;var K=N.length;if(K>0){var re=(i&sn)!==0&&r===0?t:null;if(s){for(E=0;E<K;E+=1)N[E].nodes?.a?.measure();for(E=0;E<K;E+=1)N[E].nodes?.a?.fix()}ws(a,N,re)}}s&&os(()=>{if(g!==void 0)for(v of g)v.nodes?.a?.apply()})}function Ts(a,e,t,i,n,s,r,o){var l=(r&ss)!==0?(r&rs)===0?de(t,!1,!1):Ia(t):null,h=(r&ns)!==0?Ia(n):null;return{v:l,i:h,e:aa(()=>(s(e,l??t,h??n,o),()=>{a.delete(i)}))}}function Xt(a,e,t){if(a.nodes)for(var i=a.nodes.start,n=a.nodes.end,s=e&&(e.f&qe)===0?e.nodes.start:t;i!==null;){var r=ls(i);if(s.before(i),i===n)return;i=r}}function Ve(a,e,t){e===null?a.effect.first=t:e.next=t,t===null?a.effect.last=e:t.prev=e}function Es(a,e,t){ms(()=>{var i=p(()=>e(a,t?.())||{});if(t&&i?.update){var n=!1,s={};ua(()=>{var r=t();S(r),n&&gs(s,r)&&(s=r,i.update(r))}),n=!0}if(i?.destroy)return()=>i.destroy()})}function As(a,e,t=e){var i=new WeakSet;ln(a,"input",async n=>{var s=n?a.defaultValue:a.value;if(s=zi(a)?Ki(s):s,t(s),bt!==null&&i.add(bt),await ds(),s!==(s=e())){var r=a.selectionStart,o=a.selectionEnd,l=a.value.length;if(a.value=s??"",o!==null){var h=a.value.length;r===o&&o===l&&h>l?(a.selectionStart=h,a.selectionEnd=h):(a.selectionStart=r,a.selectionEnd=Math.min(o,h))}}}),(Je&&a.defaultValue!==a.value||p(e)==null&&a.value)&&(t(zi(a)?Ki(a.value):a.value),bt!==null&&i.add(bt)),ua(()=>{var n=e();if(a===document.activeElement){var s=fs??bt;if(i.has(s))return}zi(a)&&n===Ki(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function Rs(a,e,t=e){ln(a,"change",i=>{var n=i?a.defaultChecked:a.checked;t(n)}),(Je&&a.defaultChecked!==a.checked||p(e)==null)&&t(a.checked),ua(()=>{var i=e();a.checked=!!i})}function zi(a){var e=a.type;return e==="number"||e==="range"}function Ki(a){return a===""?null:+a}const xs=Math.PI/180;function Ps(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const ot=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},b={_global:ot,version:"10.0.12",isBrowser:Ps(),isUnminified:/param/.test((function(a){}).toString()),dblClickWindow:400,getAngle(a){return b.angleDeg?a*xs:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return b.DD.isDragging},isTransforming(){var a,e;return(e=(a=b.Transformer)===null||a===void 0?void 0:a.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!b.DD.node},releaseCanvasOnDestroy:!0,document:ot.document,_injectGlobal(a){typeof ot.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),ot.Konva=a}},$e=a=>{b[a.prototype.getClassName()]=a};b._injectGlobal(b);const Bs=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,Fa=()=>{if(typeof document>"u")throw new Error(Bs)};class Qe{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Qe(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.m[0]*t+this.m[2]*i,s=this.m[1]*t+this.m[3]*i,r=this.m[0]*-i+this.m[2]*t,o=this.m[1]*-i+this.m[3]*t;return this.m[0]=n,this.m[1]=s,this.m[2]=r,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const i=this.m[0]+this.m[2]*t,n=this.m[1]+this.m[3]*t,s=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=r,this.m[5]=o,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,n=-this.m[2]*e,s=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=r,this.m[5]=o,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],i=this.m[2],n=this.m[3],s=this.m[4],r=this.m[5],o=e*n-t*i,l={x:s,y:r,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){const h=Math.sqrt(e*e+t*t);l.rotation=t>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*i+t*n)/o,l.skewY=0}else if(i!=0||n!=0){const h=Math.sqrt(i*i+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-i/h):-Math.acos(i/h)),l.scaleX=o/h,l.scaleY=h,l.skewX=0,l.skewY=(e*i+t*n)/o}return l.rotation=d._getRotation(l.rotation),l}}const Is="[object Array]",Os="[object Number]",Ls="[object String]",Gs="[object Boolean]",Ns=Math.PI/180,Fs=180/Math.PI,Mt="#",Ds="",Ms="0",Hs="Konva warning: ",Da="Konva error: ",Ws="rgb(",Vi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},qs=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let gi=[],Ht=null;const Ys=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(a){setTimeout(a,60)},d={_isElement(a){return!!(a&&a.nodeType==1)},_isFunction(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isPlainObject(a){return!!a&&a.constructor===Object},_isArray(a){return Object.prototype.toString.call(a)===Is},_isNumber(a){return Object.prototype.toString.call(a)===Os&&!isNaN(a)&&isFinite(a)},_isString(a){return Object.prototype.toString.call(a)===Ls},_isBoolean(a){return Object.prototype.toString.call(a)===Gs},isObject(a){return a instanceof Object},isValidSelector(a){if(typeof a!="string")return!1;const e=a[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(a){return a===0||a>0?1:-1},requestAnimFrame(a){gi.push(a),gi.length===1&&Ys(function(){const e=gi;gi=[],e.forEach(function(t){t()})})},createCanvasElement(){Fa();const a=document.createElement("canvas");try{a.style=a.style||{}}catch{}return a},createImageElement(){return Fa(),document.createElement("img")},_isInDocument(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},_urlToImage(a,e){const t=d.createImageElement();t.onload=function(){e(t)},t.src=a},_rgbToHex(a,e,t){return((1<<24)+(a<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(a){a=a.replace(Mt,Ds);const e=parseInt(a,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let a=(Math.random()*16777215<<0).toString(16);for(;a.length<6;)a=Ms+a;return Mt+a},isCanvasFarblingActive(){if(Ht!==null)return Ht;if(typeof document>"u")return Ht=!1,!1;const a=this.createCanvasElement();a.width=10,a.height=10;const e=a.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let n=0;n<100;n++)if(t[n*4]!==40||t[n*4+1]!==40||t[n*4+2]!==40||t[n*4+3]!==255){i=!0;break}return Ht=i,this.releaseCanvas(a),Ht},getHitColor(){const a=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(a):a},getHitColorKey(a,e,t){return this.isCanvasFarblingActive()&&(a=Math.round(a/5)*5,e=Math.round(e/5)*5,t=Math.round(t/5)*5),Mt+this._rgbToHex(a,e,t)},getSnappedHexColor(a){const e=this._hexToRgb(a);return Mt+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(a){let e;return a in Vi?(e=Vi[a],{r:e[0],g:e[1],b:e[2]}):a[0]===Mt?this._hexToRgb(a.substring(1)):a.substr(0,4)===Ws?(e=qs.exec(a.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(a){return a=a||"black",d._namedColorToRBA(a)||d._hex3ColorToRGBA(a)||d._hex4ColorToRGBA(a)||d._hex6ColorToRGBA(a)||d._hex8ColorToRGBA(a)||d._rgbColorToRGBA(a)||d._rgbaColorToRGBA(a)||d._hslColorToRGBA(a)},_namedColorToRBA(a){const e=Vi[a.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(a){if(a.indexOf("rgb(")===0){a=a.match(/rgb\(([^)]+)\)/)[1];const e=a.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(a){if(a.indexOf("rgba(")===0){a=a.match(/rgba\(([^)]+)\)/)[1];const e=a.split(/ *, */).map((t,i)=>t.slice(-1)==="%"?i===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(a){if(a[0]==="#"&&a.length===9)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:parseInt(a.slice(7,9),16)/255}},_hex6ColorToRGBA(a){if(a[0]==="#"&&a.length===7)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:1}},_hex4ColorToRGBA(a){if(a[0]==="#"&&a.length===5)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:parseInt(a[4]+a[4],16)/255}},_hex3ColorToRGBA(a){if(a[0]==="#"&&a.length===4)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:1}},_hslColorToRGBA(a){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(a)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a),i=Number(t[0])/360,n=Number(t[1])/100,s=Number(t[2])/100;let r,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?r=s*(1+n):r=s+n-s*n;const h=2*s-r,u=[0,0,0];for(let g=0;g<3;g++)o=i+1/3*-(g-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(r-h)*6*o:2*o<1?l=r:3*o<2?l=h+(r-h)*(2/3-o)*6:l=h,u[g]=l*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(a,e){return!(e.x>a.x+a.width||e.x+e.width<a.x||e.y>a.y+a.height||e.y+e.height<a.y)},cloneObject(a){const e={};for(const t in a)this._isPlainObject(a[t])?e[t]=this.cloneObject(a[t]):this._isArray(a[t])?e[t]=this.cloneArray(a[t]):e[t]=a[t];return e},cloneArray(a){return a.slice(0)},degToRad(a){return a*Ns},radToDeg(a){return a*Fs},_degToRad(a){return d.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),d.degToRad(a)},_radToDeg(a){return d.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),d.radToDeg(a)},_getRotation(a){return b.angleDeg?d.radToDeg(a):a},_capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)},throw(a){throw new Error(Da+a)},error(a){console.error(Da+a)},warn(a){b.showWarnings&&console.warn(Hs+a)},each(a,e){for(const t in a)e(t,a[t])},_inRange(a,e,t){return e<=a&&a<t},_getProjectionToSegment(a,e,t,i,n,s){let r,o,l;const h=(a-t)*(a-t)+(e-i)*(e-i);if(h==0)r=a,o=e,l=(n-t)*(n-t)+(s-i)*(s-i);else{const u=((n-a)*(t-a)+(s-e)*(i-e))/h;u<0?(r=a,o=e,l=(a-n)*(a-n)+(e-s)*(e-s)):u>1?(r=t,o=i,l=(t-n)*(t-n)+(i-s)*(i-s)):(r=a+u*(t-a),o=e+u*(i-e),l=(r-n)*(r-n)+(o-s)*(o-s))}return[r,o,l]},_getProjectionToLine(a,e,t){const i=d.cloneObject(a);let n=Number.MAX_VALUE;return e.forEach(function(s,r){if(!t&&r===e.length-1)return;const o=e[(r+1)%e.length],l=d._getProjectionToSegment(s.x,s.y,o.x,o.y,a.x,a.y),h=l[0],u=l[1],g=l[2];g<n&&(i.x=h,i.y=u,n=g)}),i},_prepareArrayForTween(a,e,t){const i=[],n=[];if(a.length>e.length){const r=e;e=a,a=r}for(let r=0;r<a.length;r+=2)i.push({x:a[r],y:a[r+1]});for(let r=0;r<e.length;r+=2)n.push({x:e[r],y:e[r+1]});const s=[];return n.forEach(function(r){const o=d._getProjectionToLine(r,i,t);s.push(o.x),s.push(o.y)}),s},_prepareToStringify(a){let e;a.visitedByCircularReferenceRemoval=!0;for(const t in a)if(a.hasOwnProperty(t)&&a[t]&&typeof a[t]=="object"){if(e=Object.getOwnPropertyDescriptor(a,t),a[t].visitedByCircularReferenceRemoval||d._isElement(a[t]))if(e.configurable)delete a[t];else return null;else if(d._prepareToStringify(a[t])===null)if(e.configurable)delete a[t];else return null}return delete a.visitedByCircularReferenceRemoval,a},_assign(a,e){for(const t in e)a[t]=e[t];return a},_getFirstPointerId(a){return a.touches?a.changedTouches[0].identifier:a.pointerId||999},releaseCanvas(...a){b.releaseCanvasOnDestroy&&a.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(a,e,t,i){let n=e<0?e:0,s=t<0?t:0;e=Math.abs(e),t=Math.abs(t);let r=0,o=0,l=0,h=0;typeof i=="number"?r=o=l=h=Math.min(i,e/2,t/2):(r=Math.min(i[0]||0,e/2,t/2),o=Math.min(i[1]||0,e/2,t/2),h=Math.min(i[2]||0,e/2,t/2),l=Math.min(i[3]||0,e/2,t/2)),a.moveTo(n+r,s),a.lineTo(n+e-o,s),a.arc(n+e-o,s+o,o,Math.PI*3/2,0,!1),a.lineTo(n+e,s+t-h),a.arc(n+e-h,s+t-h,h,0,Math.PI/2,!1),a.lineTo(n+l,s+t),a.arc(n+l,s+t-l,l,Math.PI/2,Math.PI,!1),a.lineTo(n,s+r),a.arc(n+r,s+r,r,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(a,e,t,i,n){i=Math.abs(i);for(let s=0;s<t;s++){const r=e[(s-1+t)%t],o=e[s],l=e[(s+1)%t],h={x:o.x-r.x,y:o.y-r.y},u={x:l.x-o.x,y:l.y-o.y},g=Math.hypot(h.x,h.y),c=Math.hypot(u.x,u.y);let k;typeof n=="number"?k=n:k=s<n.length?n[s]:0,k=i*Math.cos(Math.PI/t)*Math.min(1,k/i*2);const w={x:h.x/g,y:h.y/g},v={x:u.x/c,y:u.y/c},E={x:o.x-w.x*k,y:o.y-w.y*k},J={x:o.x+v.x*k,y:o.y+v.y*k};s===0?a.moveTo(E.x,E.y):a.lineTo(E.x,E.y),a.arcTo(o.x,o.y,J.x,J.y,k)}}};function ht(a){return d._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||d._isBoolean(a)?a:Object.prototype.toString.call(a)}function G(){if(b.isUnminified)return function(a,e){return d._isNumber(a)||d.warn(ht(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}function hn(a){if(b.isUnminified)return function(e,t){let i=d._isNumber(e),n=d._isArray(e)&&e.length==a;return!i&&!n&&d.warn(ht(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+a+")"),e}}function da(){if(b.isUnminified)return function(a,e){return d._isNumber(a)||a==="auto"||d.warn(ht(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}function ut(){if(b.isUnminified)return function(a,e){return d._isString(a)||d.warn(ht(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}function un(){if(b.isUnminified)return function(a,e){const t=d._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return t||i||d.warn(ht(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}function Ye(){if(b.isUnminified)return function(a,e){return a===!0||a===!1||d.warn(ht(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}function Xs(a){if(b.isUnminified)return function(e,t){return e==null||d.isObject(e)||d.warn(ht(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+a),e}}const Wt="get",qt="set",_={addGetterSetter(a,e,t,i,n){_.addGetter(a,e,t),_.addSetter(a,e,i,n),_.addOverloadedGetterSetter(a,e)},addGetter(a,e,t){const i=Wt+d._capitalize(e);a.prototype[i]=a.prototype[i]||function(){const n=this.attrs[e];return n===void 0?t:n}},addSetter(a,e,t,i){const n=qt+d._capitalize(e);a.prototype[n]||_.overWriteSetter(a,e,t,i)},overWriteSetter(a,e,t,i){const n=qt+d._capitalize(e);a.prototype[n]=function(s){return t&&s!==void 0&&s!==null&&(s=t.call(this,s,e)),this._setAttr(e,s),i&&i.call(this),this}},addComponentsGetterSetter(a,e,t,i,n){const s=t.length,r=d._capitalize,o=Wt+r(e),l=qt+r(e);a.prototype[o]=function(){const u={};for(let g=0;g<s;g++){const c=t[g];u[c]=this.getAttr(e+r(c))}return u};const h=Xs(t);a.prototype[l]=function(u){const g=this.attrs[e];i&&(u=i.call(this,u,e)),h&&h.call(this,u,e);for(const c in u)u.hasOwnProperty(c)&&this._setAttr(e+r(c),u[c]);return u||t.forEach(c=>{this._setAttr(e+r(c),void 0)}),this._fireChangeEvent(e,g,u),n&&n.call(this),this},_.addOverloadedGetterSetter(a,e)},addOverloadedGetterSetter(a,e){const t=d._capitalize(e),i=qt+t,n=Wt+t;a.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(a,e,t,i){d.error("Adding deprecated "+e);const n=Wt+d._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[n]=function(){d.error(s);const r=this.attrs[e];return r===void 0?t:r},_.addSetter(a,e,i,function(){d.error(s)}),_.addOverloadedGetterSetter(a,e)},backCompat(a,e){d.each(e,function(t,i){const n=a.prototype[i],s=Wt+d._capitalize(t),r=qt+d._capitalize(t);function o(){n.apply(this,arguments),d.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}a.prototype[t]=o,a.prototype[s]=o,a.prototype[r]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Us(a){const e=[],t=a.length,i=d;for(let n=0;n<t;n++){let s=a[n];i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),e.push(s)}return e}const Ma=",",zs="(",Ks=")",Vs="([",js="])",Js=";",Zs="()",Qs="=",Ha=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],$s=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],er=100;let di=null;function Wa(){if(di!==null)return di;try{const e=d.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(di=!1,!1)}catch{return di=!1,!1}}class Ai{constructor(e){this.canvas=e,b.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,n=i.length,s="",r,o,l,h;for(r=0;r<n;r++)o=i[r],l=o.method,l?(h=o.args,s+=l,e?s+=Zs:d._isArray(h[0])?s+=Vs+h.join(Ma)+js:(t&&(h=h.map(u=>typeof u=="number"?Math.floor(u):u)),s+=zs+h.join(Ma)+Ks)):(s+=o.property,e||(s+=Qs+o.val)),s+=Js;return s}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=er&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;t!=null&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,n,s,r){this._context.arc(e,t,i,n,s,r)}arcTo(e,t,i,n,s){this._context.arcTo(e,t,i,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,n,s,r){this._context.bezierCurveTo(e,t,i,n,s,r)}clearRect(e,t,i,n){this._context.clearRect(e,t,i,n)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,n){return this._context.createLinearGradient(e,t,i,n)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,n,s,r){return this._context.createRadialGradient(e,t,i,n,s,r)}drawImage(e,t,i,n,s,r,o,l,h){const u=arguments,g=this._context;u.length===3?g.drawImage(e,t,i):u.length===5?g.drawImage(e,t,i,n,s):u.length===9&&g.drawImage(e,t,i,n,s,r,o,l,h)}ellipse(e,t,i,n,s,r,o,l){this._context.ellipse(e,t,i,n,s,r,o,l)}isPointInPath(e,t,i,n){return i?this._context.isPointInPath(i,e,t,n):this._context.isPointInPath(e,t,n)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,n){this._context.fillRect(e,t,i,n)}strokeRect(e,t,i,n){this._context.strokeRect(e,t,i,n)}fillText(e,t,i,n){n?this._context.fillText(e,t,i,n):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,n){return this._context.getImageData(e,t,i,n)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,n){this._context.rect(e,t,i,n)}roundRect(e,t,i,n,s){this._context.roundRect(e,t,i,n,s)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,n){this._context.quadraticCurveTo(e,t,i,n)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,n,s,r){this._context.setTransform(e,t,i,n,s,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,n){this._context.strokeText(e,t,i,n)}transform(e,t,i,n,s,r){this._context.transform(e,t,i,n,s,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=Ha.length,i=this.setAttr,n,s;const r=function(o){let l=e[o],h;e[o]=function(){return s=Us(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:s}),h}};for(n=0;n<t;n++)r(Ha[n]);e.setAttr=function(){i.apply(e,arguments);const o=arguments[0];let l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}$s.forEach(function(a){Object.defineProperty(Ai.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class tr extends Ai{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}const n=e.getFillPatternImage();if(n&&i==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(e);return}const r=e.getFillRadialGradientColorStops();if(r&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):n?this._fillPattern(e):s?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),n=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(t.x,t.y,i.x,i.y);if(n){for(let r=0;r<n.length;r+=2)s.addColorStop(n[r],n[r+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,n;const s=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",r=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,o=(n=e.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),u=l.x*h,g=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",r*Math.min(Math.abs(u),Math.abs(g))),this.setAttr("shadowOffsetX",o.x*u),this.setAttr("shadowOffsetY",o.y*g)}}class ir extends Ai{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),n=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let fi;function ar(){if(fi)return fi;const a=d.createCanvasElement(),e=a.getContext("2d");return fi=(function(){const t=b._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i})(),d.releaseCanvas(a),fi}class fa{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||b.pixelRatio||ar();this.pixelRatio=i,this._canvas=d.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(n){return d.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Ze extends fa{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new tr(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class pa extends fa{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new ir(this),this.setSize(e.width,e.height)}}const q={get isDragging(){let a=!1;return q._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(a=!0)}),a},justDragged:!1,get node(){let a;return q._dragElements.forEach(e=>{a=e.node}),a},_dragElements:new Map,_drag(a){const e=[];q._dragElements.forEach((t,i)=>{const{node:n}=t,s=n.getStage();s.setPointersPositions(a),t.pointerId===void 0&&(t.pointerId=d._getFirstPointerId(a));const r=s._changedPointerPositions.find(o=>o.id===t.pointerId);if(r){if(t.dragStatus!=="dragging"){const o=n.dragDistance();if(Math.max(Math.abs(r.x-t.startPointerPos.x),Math.abs(r.y-t.startPointerPos.y))<o||(n.startDrag({evt:a}),!n.isDragging()))return}n._setDragPosition(a,t),e.push(n)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:a},!0)})},_endDragBefore(a){const e=[];q._dragElements.forEach(t=>{const{node:i}=t,n=i.getStage();if(a&&n.setPointersPositions(a),!n._changedPointerPositions.find(o=>o.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(q.justDragged=!0,b._mouseListenClick=!1,b._touchListenClick=!1,b._pointerListenClick=!1,t.dragStatus="stopped");const r=t.node.getLayer()||t.node instanceof b.Stage&&t.node;r&&e.indexOf(r)===-1&&e.push(r)}),e.forEach(t=>{t.draw()})},_endDragAfter(a){q._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:a},!0),e.dragStatus!=="dragging"&&q._dragElements.delete(t)})}};b.isBrowser&&(window.addEventListener("mouseup",q._endDragBefore,!0),window.addEventListener("touchend",q._endDragBefore,!0),window.addEventListener("touchcancel",q._endDragBefore,!0),window.addEventListener("mousemove",q._drag),window.addEventListener("touchmove",q._drag),window.addEventListener("mouseup",q._endDragAfter,!1),window.addEventListener("touchend",q._endDragAfter,!1),window.addEventListener("touchcancel",q._endDragAfter,!1));function nr(a){const e=/(\w+)\(([^)]+)\)/g;let t;for(;(t=e.exec(a))!==null;){const[,i,n]=t;switch(i){case"blur":{const s=parseFloat(n.replace("px",""));return function(r){this.blurRadius(s*.5);const o=b.Filters;o&&o.Blur&&o.Blur.call(this,r)}}case"brightness":{const s=n.includes("%")?parseFloat(n)/100:parseFloat(n);return function(r){this.brightness(s);const o=b.Filters;o&&o.Brightness&&o.Brightness.call(this,r)}}case"contrast":{const s=parseFloat(n);return function(r){const o=100*(Math.sqrt(s)-1);this.contrast(o);const l=b.Filters;l&&l.Contrast&&l.Contrast.call(this,r)}}case"grayscale":return function(s){const r=b.Filters;r&&r.Grayscale&&r.Grayscale.call(this,s)};case"sepia":return function(s){const r=b.Filters;r&&r.Sepia&&r.Sepia.call(this,s)};case"invert":return function(s){const r=b.Filters;r&&r.Invert&&r.Invert.call(this,s)};default:d.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const bi="absoluteOpacity",pi="allEventListeners",We="absoluteTransform",qa="absoluteScale",st="canvas",sr="Change",rr="children",or="konva",ra="listening",lr="mouseenter",cr="mouseleave",hr="pointerenter",ur="pointerleave",mr="touchenter",gr="touchleave",Ya="set",Xa="Shape",Ti=" ",Ua="stage",je="transform",dr="Stage",oa="visible",fr=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ti);let pr=1;class R{constructor(e){this._id=pr++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===je||e===We)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===je||e===We)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){const n=t.map(s=>s+"Change.konva").join(Ti);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(st)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===We&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(st)){const{scene:e,filter:t,hit:i,buffer:n}=this._cache.get(st);d.releaseCanvas(e,t,i,n),this._cache.delete(st)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let n=Math.ceil(t.width||i.width),s=Math.ceil(t.height||i.height),r=t.pixelRatio,o=t.x===void 0?Math.floor(i.x):t.x,l=t.y===void 0?Math.floor(i.y):t.y,h=t.offset||0,u=t.drawBorder||!1,g=t.hitCanvasPixelRatio||1;if(!n||!s){d.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const c=Math.abs(Math.round(i.x)-o)>.5?1:0,k=Math.abs(Math.round(i.y)-l)>.5?1:0;n+=h*2+c,s+=h*2+k,o-=h,l-=h;const f=new Ze({pixelRatio:r,width:n,height:s}),w=new Ze({pixelRatio:r,width:0,height:0,willReadFrequently:!0}),v=new pa({pixelRatio:g,width:n,height:s}),E=f.getContext(),J=v.getContext(),ee=new Ze({width:f.width/f.pixelRatio+Math.abs(o),height:f.height/f.pixelRatio+Math.abs(l),pixelRatio:f.pixelRatio}),B=ee.getContext();return v.isCache=!0,f.isCache=!0,this._cache.delete(st),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,w.getContext()._context.imageSmoothingEnabled=!1),E.save(),J.save(),B.save(),E.translate(-o,-l),J.translate(-o,-l),B.translate(-o,-l),ee.x=o,ee.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(bi),this._clearSelfAndDescendantCache(qa),this.drawScene(f,this,ee),this.drawHit(v,this),this._isUnderCache=!1,E.restore(),J.restore(),u&&(E.save(),E.beginPath(),E.rect(0,0,n,s),E.closePath(),E.setAttr("strokeStyle","red"),E.setAttr("lineWidth",5),E.stroke(),E.restore()),this._cache.set(st,{scene:f,filter:w,hit:v,buffer:ee,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(st)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let n=1/0,s=1/0,r=-1/0,o=-1/0;const l=this.getAbsoluteTransform(t);return i.forEach(function(h){const u=l.point(h);n===void 0&&(n=r=u.x,s=o=u.y),n=Math.min(n,u.x),s=Math.min(s,u.y),r=Math.max(r,u.x),o=Math.max(o,u.y)}),{x:n,y:s,width:r-n,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const i=this._getCachedSceneCanvas(),n=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/n,i.height/n),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,n=t.filter,s=n.getContext(),r,o,l,h;if(!e||e.length===0)return i;if(this._filterUpToDate)return n;let u=!0;for(let c=0;c<e.length;c++)if(typeof e[c]=="string"&&Wa(),typeof e[c]!="string"||!Wa()){u=!1;break}const g=i.pixelRatio;if(n.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),u){const c=e.join(" ");return s.save(),s.setAttr("filter",c),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),s.restore(),this._filterUpToDate=!0,n}try{for(r=e.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<r;l++)h=e[l],typeof h=="string"&&(h=nr(h)),h.call(this,o),s.putImageData(o,0,0)}catch(c){d.error("Unable to apply filter. "+c.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,n}on(e,t){if(this._cache&&this._cache.delete(pi),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(Ti);for(let n=0;n<i.length;n++){const r=i[n].split("."),o=r[0],l=r[1]||"";this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:l,handler:t})}return this}off(e,t){let i=(e||"").split(Ti),n=i.length,s,r,o,l,h,u;if(this._cache&&this._cache.delete(pi),!e)for(r in this.eventListeners)this._off(r);for(s=0;s<n;s++)if(o=i[s],l=o.split("."),h=l[0],u=l[1],h)this.eventListeners[h]&&this._off(h,u,t);else for(r in this.eventListeners)this._off(r,u,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){const n=this;this.on(e,function(s){const r=s.target.findAncestors(t,!0,n);for(let o=0;o<r.length;o++)s=d.cloneObject(s),s.currentTarget=r[o],i.call(r[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),q._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(We),this._clearSelfAndDescendantCache(bi),this._clearSelfAndDescendantCache(qa),this._clearSelfAndDescendantCache(Ua),this._clearSelfAndDescendantCache(oa),this._clearSelfAndDescendantCache(ra)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+d._capitalize(e);return d._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==rr&&(i=Ya+d._capitalize(t),d._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(ra,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(oa,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let n=!1;q._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(r.node.nodeType==="Stage"||r.node.getLayer()===i)&&(n=!0)});const s=!t&&!b.hitOnDragEnabled&&(n||b.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,n,s,r,o;function l(u){for(n=[],s=u.length,r=0;r<s;r++)o=u[r],i++,o.nodeType!==Xa&&(n=n.concat(o.getChildren().slice())),o._id===t._id&&(r=s);n.length>0&&n[0].getDepth()<=e&&l(n)}const h=this.getStage();return t.nodeType!==dr&&h&&l(h.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(je),this._clearSelfAndDescendantCache(We)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);const n=this.getAbsoluteTransform(e).getMatrix(),s=new Qe,r=this.offset();return s.m=n.slice(),s.translate(r.x,r.y),s.getTranslation()}setAbsolutePosition(e){const{x:t,y:i,...n}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(je);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(je),this._clearSelfAndDescendantCache(We),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,n=this.x(),s=this.y();return t!==void 0&&(n+=t),i!==void 0&&(s+=i),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(e,t){let i=[],n=this.getParent(),s,r;if(!(t&&t._id===this._id)){for(i.unshift(this);n&&(!t||n._id!==t._id);)i.unshift(n),n=n.parent;for(s=i.length,r=0;r<s;r++)e(i[r])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return d.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return d.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return d.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return d.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return d.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&d.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(bi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,n,s,r;const o={attrs:{},className:this.getClassName()};for(t in e)i=e[t],r=d.isObject(i)&&!d._isPlainObject(i)&&!d._isArray(i),!r&&(n=typeof this[t]=="function"&&this[t],delete e[t],s=n?n.call(this):null,e[t]=i,s!==i&&(o.attrs[t]=i));return d._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){const n=[];t&&this._isMatch(e)&&n.push(this);let s=this.parent;for(;s;){if(s===i)return n;s._isMatch(e)&&n.push(s),s=s.parent}return n}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,n,s;for(n=0;n<i;n++)if(s=t[n],d.isValidSelector(s)||(d.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),d.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),d.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Ua,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(We,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Qe,this._eachAncestorReverse(function(i){const n=i.transformsEnabled();n==="all"?t.multiply(i.getTransform()):n==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(We)||new Qe,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,r=this.attrs.offsetX||0,o=this.attrs.offsetY||0;t.translate(n-r,s-o)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(je,this._getTransform)}_getTransform(){var e,t;const i=this._cache.get(je)||new Qe;i.reset();const n=this.x(),s=this.y(),r=b.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,h=this.attrs.skewX||0,u=this.attrs.skewY||0,g=this.attrs.offsetX||0,c=this.attrs.offsetY||0;return(n!==0||s!==0)&&i.translate(n,s),r!==0&&i.rotate(r),(h!==0||u!==0)&&i.skew(h,u),(o!==1||l!==1)&&i.scale(o,l),(g!==0||c!==0)&&i.translate(-1*g,-1*c),i.dirty=!1,i}clone(e){let t=d.cloneObject(this.attrs),i,n,s,r,o;for(i in e)t[i]=e[i];const l=new this.constructor(t);for(i in this.eventListeners)for(n=this.eventListeners[i],s=n.length,r=0;r<s;r++)o=n[r],o.name.indexOf(or)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(o));return l}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),i=this.getStage(),n=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),r=e.pixelRatio||1,o=new Ze({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:r}),l=o.getContext(),h=new Ze({width:o.width/o.pixelRatio+Math.abs(n),height:o.height/o.pixelRatio+Math.abs(s),pixelRatio:o.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o,void 0,h),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,i=e.quality||null,n=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(n),n}toImage(e){return new Promise((t,i)=>{try{const n=e?.callback;n&&delete e.callback,d._urlToImage(this.toDataURL(e),function(s){t(s),n?.(s)})}catch(n){i(n)}})}toBlob(e){return new Promise((t,i)=>{try{const n=e?.callback;n&&delete e.callback,this.toCanvas(e).toBlob(s=>{t(s),n?.(s)},e?.mimeType,e?.quality)}catch(n){i(n)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():b.dragDistance}_off(e,t,i){let n=this.eventListeners[e],s,r,o;for(s=0;s<n.length;s++)if(r=n[s].name,o=n[s].handler,(r!=="konva"||t==="konva")&&(!t||r===t)&&(!i||i===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,t,i){this._fire(e+sr,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){const t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){const i=this[Ya+d._capitalize(e)];return d._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(b.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,t){const i=this.attrs[e];i===t&&!d.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let n;i!==void 0&&(n=this.attrs[e],n||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,n,i))}_fireAndBubble(e,t,i){t&&this.nodeType===Xa&&(t.target=this);const n=[lr,cr,hr,ur,mr,gr];if(!(n.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);const r=n.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!r&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i,n;const s=(t=this._cache.get(pi))!==null&&t!==void 0?t:{};let r=s?.[e];if(r===void 0){r=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(n=(i=o.eventListeners)===null||i===void 0?void 0:i[e])!==null&&n!==void 0?n:[];r.push(...l),o=Object.getPrototypeOf(o)}s[e]=r,this._cache.set(pi,s)}return r}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const i=this._getProtoListeners(e);if(i)for(let s=0;s<i.length;s++)i[s].handler.call(this,t);const n=this.eventListeners[e];if(n)for(let s=0;s<n.length;s++)n[s].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,i=this.getStage(),n=this.getAbsolutePosition();if(!i)return;const s=i._getPointerById(t)||i._changedPointerPositions[0]||n;q._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){q._dragElements.has(this._id)||this._createDragElement(e);const i=q._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let n={x:i.x-t.offset.x,y:i.y-t.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const r=s.call(this,n,e);r?n=r:d.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}stopDrag(e){const t=q._dragElements.get(this._id);t&&(t.dragStatus="stopped"),q._endDragBefore(e),q._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=q._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||b.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let n=!1;q._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=q._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",n=t&&t.dragStatus==="ready";i?this.stopDrag():n&&q._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return d.haveIntersection(i,this.getClientRect())}static create(e,t){return d._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=R.prototype.getClassName.call(e),n=e.children,s,r,o;t&&(e.attrs.container=t),b[i]||(d.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=b[i];if(s=new l(e.attrs),n)for(r=n.length,o=0;o<r;o++)s.add(R._createNode(n[o]));return s}}R.prototype.nodeType="Node";R.prototype._attrsAffectingSize=[];R.prototype.eventListeners={};R.prototype.on.call(R.prototype,fr,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(je),this._clearSelfAndDescendantCache(We)});R.prototype.on.call(R.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(oa)});R.prototype.on.call(R.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ra)});R.prototype.on.call(R.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(bi)});const j=_.addGetterSetter;j(R,"zIndex");j(R,"absolutePosition");j(R,"position");j(R,"x",0,G());j(R,"y",0,G());j(R,"globalCompositeOperation","source-over",ut());j(R,"opacity",1,G());j(R,"name","",ut());j(R,"id","",ut());j(R,"rotation",0,G());_.addComponentsGetterSetter(R,"scale",["x","y"]);j(R,"scaleX",1,G());j(R,"scaleY",1,G());_.addComponentsGetterSetter(R,"skew",["x","y"]);j(R,"skewX",0,G());j(R,"skewY",0,G());_.addComponentsGetterSetter(R,"offset",["x","y"]);j(R,"offsetX",0,G());j(R,"offsetY",0,G());j(R,"dragDistance",void 0,G());j(R,"width",0,G());j(R,"height",0,G());j(R,"listening",!0,Ye());j(R,"preventDefault",!0,Ye());j(R,"filters",void 0,function(a){return this._filterUpToDate=!1,a});j(R,"visible",!0,Ye());j(R,"transformsEnabled","all",ut());j(R,"size");j(R,"dragBoundFunc");j(R,"draggable",!1,Ye());_.backCompat(R,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const ei=new Map,mn=b._global.PointerEvent!==void 0;function ji(a){return ei.get(a)}function va(a){return{evt:a,pointerId:a.pointerId}}function gn(a,e){return ei.get(a)===e}function dn(a,e){Jt(a),e.getStage()&&(ei.set(a,e),mn&&e._fire("gotpointercapture",va(new PointerEvent("gotpointercapture"))))}function Jt(a,e){const t=ei.get(a);if(!t)return;const i=t.getStage();i&&i.content,ei.delete(a),mn&&t._fire("lostpointercapture",va(new PointerEvent("lostpointercapture")))}const fn="hasShadow",pn="shadowRGBA",vn="patternImage",_n="linearGradient",kn="radialGradient";let vi;function Ji(){return vi||(vi=d.createCanvasElement().getContext("2d"),vi)}const Zt={};function vr(a){const e=this.attrs.fillRule;e?a.fill(e):a.fill()}function _r(a){a.stroke()}function kr(a){const e=this.attrs.fillRule;e?a.fill(e):a.fill()}function yr(a){a.stroke()}function Sr(){this._clearCache(fn)}function Cr(){this._clearCache(pn)}function wr(){this._clearCache(vn)}function br(){this._clearCache(_n)}function Tr(){this._clearCache(kn)}class y extends R{constructor(e){super(e);let t,i=0;for(;t=d.getHitColor(),!(t&&!(t in Zt));)if(i++,i>=1e4){d.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=d.getRandomColor();break}this.colorKey=t,Zt[t]=this}getContext(){return d.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return d.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(fn,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(vn,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=Ji().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const i=new Qe;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(b.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=i.getMatrix(),s=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);t.setTransform(s)}return t}}_getLinearGradient(){return this._getCache(_n,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=Ji(),i=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=t.createLinearGradient(i.x,i.y,n.x,n.y);for(let r=0;r<e.length;r+=2)s.addColorStop(e[r],e[r+1]);return s}}_getRadialGradient(){return this._getCache(kn,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=Ji(),i=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius());for(let r=0;r<e.length;r+=2)s.addColorStop(e[r],e[r+1]);return s}}getShadowRGBA(){return this._getCache(pn,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=d.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return R.prototype.destroy.call(this),delete Zt[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const n=e||this.hasFill(),s=this.hasStroke(),r=this.getAbsoluteOpacity()!==1;if(n&&s&&r)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(e){d.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,i=this.getParent();for(;i;){if(i.isCached()){t=!0;break}i=i.getParent()}const n=e.skipTransform,s=e.relativeTo||t&&this.getStage()||void 0,r=this.getSelfRect(),l=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,h=r.width+l,u=r.height+l,g=!e.skipShadow&&this.hasShadow(),c=g?this.shadowOffsetX():0,k=g?this.shadowOffsetY():0,f=h+Math.abs(c),w=u+Math.abs(k),v=g&&this.shadowBlur()||0,E=f+v*2,J=w+v*2,ee={width:E,height:J,x:-(l/2+v)+Math.min(c,0)+r.x,y:-(l/2+v)+Math.min(k,0)+r.y};return n?ee:this._transformedRect(ee,s)}drawScene(e,t,i){const n=this.getLayer(),s=e||n.getCanvas(),r=s.getContext(),o=this._getCanvasCache(),l=this.getSceneFunc(),h=this.hasShadow();let u;const g=t===this;if(!this.isVisible()&&!g)return this;if(o){r.save();const c=this.getAbsoluteTransform(t).getMatrix();return r.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(r),r.restore(),this}if(!l)return this;if(r.save(),this._useBufferCanvas()){u=this.getStage();const c=i||u.bufferCanvas,k=c.getContext();k.clear(),k.save(),k._applyLineJoin(this),k._applyMiterLimit(this);const f=this.getAbsoluteTransform(t).getMatrix();k.transform(f[0],f[1],f[2],f[3],f[4],f[5]),l.call(this,k,this),k.restore();const w=c.pixelRatio;h&&r._applyShadow(this),g||(r._applyOpacity(this),r._applyGlobalCompositeOperation(this)),r.drawImage(c._canvas,c.x||0,c.y||0,c.width/w,c.height/w)}else{if(r._applyLineJoin(this),r._applyMiterLimit(this),!g){const c=this.getAbsoluteTransform(t).getMatrix();r.transform(c[0],c[1],c[2],c[3],c[4],c[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)}h&&r._applyShadow(this),l.call(this,r,this)}return r.restore(),this}drawHit(e,t,i=!1){if(!this.shouldDrawHit(t,i))return this;const n=this.getLayer(),s=e||n.hitCanvas,r=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||d.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){r.save();const g=this.getAbsoluteTransform(t).getMatrix();return r.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(r),r.restore(),this}if(!o)return this;if(r.save(),r._applyLineJoin(this),r._applyMiterLimit(this),!(this===t)){const g=this.getAbsoluteTransform(t).getMatrix();r.transform(g[0],g[1],g[2],g[3],g[4],g[5])}return o.call(this,r,this),r.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),i=this._getCachedSceneCanvas(),n=t.hit,s=n.getContext(),r=n.getWidth(),o=n.getHeight();s.clear(),s.drawImage(i._canvas,0,0,r,o);try{const l=s.getImageData(0,0,r,o),h=l.data,u=h.length,g=d._hexToRgb(this.colorKey);for(let c=0;c<u;c+=4)h[c+3]>e?(h[c]=g.r,h[c+1]=g.g,h[c+2]=g.b,h[c+3]=255):h[c+3]=0;s.putImageData(l,0,0)}catch(l){d.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(e){return gn(e,this)}setPointerCapture(e){dn(e,this)}releaseCapture(e){Jt(e)}}y.prototype._fillFunc=vr;y.prototype._strokeFunc=_r;y.prototype._fillFuncHit=kr;y.prototype._strokeFuncHit=yr;y.prototype._centroid=!1;y.prototype.nodeType="Shape";$e(y);y.prototype.eventListeners={};y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Sr);y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Cr);y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",wr);y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",br);y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Tr);_.addGetterSetter(y,"stroke",void 0,un());_.addGetterSetter(y,"strokeWidth",2,G());_.addGetterSetter(y,"fillAfterStrokeEnabled",!1);_.addGetterSetter(y,"hitStrokeWidth","auto",da());_.addGetterSetter(y,"strokeHitEnabled",!0,Ye());_.addGetterSetter(y,"perfectDrawEnabled",!0,Ye());_.addGetterSetter(y,"shadowForStrokeEnabled",!0,Ye());_.addGetterSetter(y,"lineJoin");_.addGetterSetter(y,"lineCap");_.addGetterSetter(y,"miterLimit");_.addGetterSetter(y,"sceneFunc");_.addGetterSetter(y,"hitFunc");_.addGetterSetter(y,"dash");_.addGetterSetter(y,"dashOffset",0,G());_.addGetterSetter(y,"shadowColor",void 0,ut());_.addGetterSetter(y,"shadowBlur",0,G());_.addGetterSetter(y,"shadowOpacity",1,G());_.addComponentsGetterSetter(y,"shadowOffset",["x","y"]);_.addGetterSetter(y,"shadowOffsetX",0,G());_.addGetterSetter(y,"shadowOffsetY",0,G());_.addGetterSetter(y,"fillPatternImage");_.addGetterSetter(y,"fill",void 0,un());_.addGetterSetter(y,"fillPatternX",0,G());_.addGetterSetter(y,"fillPatternY",0,G());_.addGetterSetter(y,"fillLinearGradientColorStops");_.addGetterSetter(y,"strokeLinearGradientColorStops");_.addGetterSetter(y,"fillRadialGradientStartRadius",0);_.addGetterSetter(y,"fillRadialGradientEndRadius",0);_.addGetterSetter(y,"fillRadialGradientColorStops");_.addGetterSetter(y,"fillPatternRepeat","repeat");_.addGetterSetter(y,"fillEnabled",!0);_.addGetterSetter(y,"strokeEnabled",!0);_.addGetterSetter(y,"shadowEnabled",!0);_.addGetterSetter(y,"dashEnabled",!0);_.addGetterSetter(y,"strokeScaleEnabled",!0);_.addGetterSetter(y,"fillPriority","color");_.addComponentsGetterSetter(y,"fillPatternOffset",["x","y"]);_.addGetterSetter(y,"fillPatternOffsetX",0,G());_.addGetterSetter(y,"fillPatternOffsetY",0,G());_.addComponentsGetterSetter(y,"fillPatternScale",["x","y"]);_.addGetterSetter(y,"fillPatternScaleX",1,G());_.addGetterSetter(y,"fillPatternScaleY",1,G());_.addComponentsGetterSetter(y,"fillLinearGradientStartPoint",["x","y"]);_.addComponentsGetterSetter(y,"strokeLinearGradientStartPoint",["x","y"]);_.addGetterSetter(y,"fillLinearGradientStartPointX",0);_.addGetterSetter(y,"strokeLinearGradientStartPointX",0);_.addGetterSetter(y,"fillLinearGradientStartPointY",0);_.addGetterSetter(y,"strokeLinearGradientStartPointY",0);_.addComponentsGetterSetter(y,"fillLinearGradientEndPoint",["x","y"]);_.addComponentsGetterSetter(y,"strokeLinearGradientEndPoint",["x","y"]);_.addGetterSetter(y,"fillLinearGradientEndPointX",0);_.addGetterSetter(y,"strokeLinearGradientEndPointX",0);_.addGetterSetter(y,"fillLinearGradientEndPointY",0);_.addGetterSetter(y,"strokeLinearGradientEndPointY",0);_.addComponentsGetterSetter(y,"fillRadialGradientStartPoint",["x","y"]);_.addGetterSetter(y,"fillRadialGradientStartPointX",0);_.addGetterSetter(y,"fillRadialGradientStartPointY",0);_.addComponentsGetterSetter(y,"fillRadialGradientEndPoint",["x","y"]);_.addGetterSetter(y,"fillRadialGradientEndPointX",0);_.addGetterSetter(y,"fillRadialGradientEndPointY",0);_.addGetterSetter(y,"fillPatternRotation",0);_.addGetterSetter(y,"fillRule",void 0,ut());_.backCompat(y,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Er=["mouseover","mouseout","mouseenter","mouseleave","mousemove","mousedown","mouseup","wheel","click","dblclick","touchstart","touchmove","touchend","tap","dbltap","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerenter","pointerout","pointerleave","pointerclick","pointerdblclick","contextmenu","dragstart","dragmove","dragend","transformstart","transform","transformend"];function xt(a,e){Er.forEach(t=>{const i=a[`on${t}`];typeof i=="function"&&e.on(t,n=>{i(n)})})}const Ei=["svelte-konva-stage","svelte-konva-layer","svelte-konva-group","svelte-konva-label"];var Et;(function(a){a[a.Stage=0]="Stage",a[a.Layer=1]="Layer",a[a.Group=2]="Group",a[a.Label=3]="Label"})(Et||(Et={}));const Ar="svelte-konva: Component does not have any parent container. Please make sure that the component is wrapped inside a Layer or Group.",Rr="svelte-konva: A Layer needs to have a Stage as parent.";function _a(a,e){Ei.forEach(t=>{Oa(t,null)}),Oa(Ei[a],e)}function Ri(){for(let a=1;a<4;a++){const e=cn(Ei[a]);if(e)return e}throw new Error(Ar)}function xr(){const a=cn(Ei[Et.Stage]);if(a)return a;throw new Error(Rr)}class be extends R{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const i=[];return this._descendants(n=>{const s=n._isMatch(e);return s&&i.push(n),!!(s&&t)}),i}_descendants(e){let t=!1;const i=this.getChildren();for(const n of i){if(t=e(n),t)return!0;if(n.hasChildren()&&(t=n._descendants(e),t))return!0}return!1}toObject(){const e=R.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=R.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){const n=this.getLayer(),s=e||n&&n.getCanvas(),r=s&&s.getContext(),o=this._getCanvasCache(),l=o&&o.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(l){r.save();const u=this.getAbsoluteTransform(t).getMatrix();r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const i=this.getLayer(),n=e||i&&i.hitCanvas,s=n&&n.getContext(),r=this._getCanvasCache();if(r&&r.hit){s.save();const l=this.getAbsoluteTransform(t).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,t);return this}_drawChildren(e,t,i,n){var s;const r=t&&t.getContext(),o=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),u=typeof o=="number"&&typeof l=="number"||h,g=i===this;if(u){r.save();const k=this.getAbsoluteTransform(i);let f=k.getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),r.beginPath();let w;if(h)w=h.call(this,r,this);else{const v=this.clipX(),E=this.clipY();r.rect(v||0,E||0,o,l)}r.clip.apply(r,w),f=k.copy().invert().getMatrix(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const c=!g&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";c&&(r.save(),r._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(k){k[e](t,i,n)}),c&&r.restore(),u&&r.restore()}getClientRect(e={}){var t;const i=e.skipTransform,n=e.relativeTo;let s,r,o,l,h={x:1/0,y:1/0,width:0,height:0};const u=this;(t=this.children)===null||t===void 0||t.forEach(function(k){if(!k.visible())return;const f=k.getClientRect({relativeTo:u,skipShadow:e.skipShadow,skipStroke:e.skipStroke});f.width===0&&f.height===0||(s===void 0?(s=f.x,r=f.y,o=f.x+f.width,l=f.y+f.height):(s=Math.min(s,f.x),r=Math.min(r,f.y),o=Math.max(o,f.x+f.width),l=Math.max(l,f.y+f.height)))});const g=this.find("Shape");let c=!1;for(let k=0;k<g.length;k++)if(g[k]._isVisible(this)){c=!0;break}return c&&s!==void 0?h={x:s,y:r,width:o-s,height:l-r}:h={x:0,y:0,width:0,height:0},i?h:this._transformedRect(h,n)}}_.addComponentsGetterSetter(be,"clip",["x","y","width","height"]);_.addGetterSetter(be,"clipX",void 0,G());_.addGetterSetter(be,"clipY",void 0,G());_.addGetterSetter(be,"clipWidth",void 0,G());_.addGetterSetter(be,"clipHeight",void 0,G());_.addGetterSetter(be,"clipFunc");const Pr="Stage",Br="string",za="px",Ir="mouseout",yn="mouseleave",Sn="mouseover",Cn="mouseenter",wn="mousemove",bn="mousedown",Tn="mouseup",Ut="pointermove",zt="pointerdown",Tt="pointerup",Kt="pointercancel",Or="lostpointercapture",_i="pointerout",Vt="pointerleave",ki="pointerover",yi="pointerenter",la="contextmenu",En="touchstart",An="touchend",Rn="touchmove",xn="touchcancel",ca="wheel",Lr=5,Gr=[[Cn,"_pointerenter"],[bn,"_pointerdown"],[wn,"_pointermove"],[Tn,"_pointerup"],[yn,"_pointerleave"],[En,"_pointerdown"],[Rn,"_pointermove"],[An,"_pointerup"],[xn,"_pointercancel"],[Sn,"_pointerover"],[ca,"_wheel"],[la,"_contextmenu"],[zt,"_pointerdown"],[Ut,"_pointermove"],[Tt,"_pointerup"],[Kt,"_pointercancel"],[Vt,"_pointerleave"],[Or,"_lostpointercapture"]],Zi={mouse:{[_i]:Ir,[Vt]:yn,[ki]:Sn,[yi]:Cn,[Ut]:wn,[zt]:bn,[Tt]:Tn,[Kt]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[_i]:"touchout",[Vt]:"touchleave",[ki]:"touchover",[yi]:"touchenter",[Ut]:Rn,[zt]:En,[Tt]:An,[Kt]:xn,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[_i]:_i,[Vt]:Vt,[ki]:ki,[yi]:yi,[Ut]:Ut,[zt]:zt,[Tt]:Tt,[Kt]:Kt,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},jt=a=>a.indexOf("pointer")>=0?"pointer":a.indexOf("touch")>=0?"touch":"mouse",St=a=>{const e=jt(a);if(e==="pointer")return b.pointerEventsEnabled&&Zi.pointer;if(e==="touch")return Zi.touch;if(e==="mouse")return Zi.mouse};function Ka(a={}){return(a.clipFunc||a.clipWidth||a.clipHeight)&&d.warn("Stage does not support clipping. Please use clip for Layers or Groups."),a}const Nr="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Qt=[];let ti=class extends be{constructor(e){super(Ka(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Qt.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ka(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",i=e.getType()==="FastLayer";t||i||d.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Br){let t;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let i=0;i<t;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),be.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&d._isInDocument(e)&&this.container().removeChild(e);const t=Qt.indexOf(this);return t>-1&&Qt.splice(t,1),d.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(d.warn(Nr),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Ze({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,n=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),n.forEach(function(s){if(!s.isVisible())return;const r=s._toKonvaCanvas(e);i.drawImage(r._canvas,e.x,e.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children,i=t.length,n=i-1;for(let s=n;s>=0;s--){const r=t[s].getIntersection(e);if(r)return r}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+za,this.content.style.height=t+za),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e,...t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);const i=this.children.length;return i>Lr&&d.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),b.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return gn(e,this)}setPointerCapture(e){dn(e,this)}releaseCapture(e){Jt(e)}getLayers(){return this.children}_bindContentEvents(){b.isBrowser&&Gr.forEach(([e,t])=>{this.content.addEventListener(e,i=>{this[t](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=St(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=St(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=St(e.type),i=jt(e.type);if(!t)return;this.setPointersPositions(e);const n=this._getTargetShape(i),s=!(b.isDragging()||b.isTransforming())||b.hitOnDragEnabled;n&&s?(n._fireAndBubble(t.pointerout,{evt:e}),n._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=St(e.type),i=jt(e.type);if(!t)return;this.setPointersPositions(e);let n=!1;this._changedPointerPositions.forEach(s=>{const r=this.getIntersection(s);if(q.justDragged=!1,b["_"+i+"ListenClick"]=!0,!r||!r.isListening()){this[i+"ClickStartShape"]=void 0;return}b.capturePointerEventsEnabled&&r.setPointerCapture(s.id),this[i+"ClickStartShape"]=r,r._fireAndBubble(t.pointerdown,{evt:e,pointerId:s.id}),n=!0;const o=e.type.indexOf("touch")>=0;r.preventDefault()&&e.cancelable&&o&&e.preventDefault()}),n||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=St(e.type),i=jt(e.type);if(!t)return;const n=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(b.isDragging()&&q.node.preventDefault()&&e.cancelable&&n&&e.preventDefault(),this.setPointersPositions(e),!(!(b.isDragging()||b.isTransforming())||b.hitOnDragEnabled))return;const r={};let o=!1;const l=this._getTargetShape(i);this._changedPointerPositions.forEach(h=>{const u=ji(h.id)||this.getIntersection(h),g=h.id,c={evt:e,pointerId:g},k=l!==u;if(k&&l&&(l._fireAndBubble(t.pointerout,{...c},u),l._fireAndBubble(t.pointerleave,{...c},u)),u){if(r[u._id])return;r[u._id]=!0}u&&u.isListening()?(o=!0,k&&(u._fireAndBubble(t.pointerover,{...c},l),u._fireAndBubble(t.pointerenter,{...c},l),this[i+"targetShape"]=u),u._fireAndBubble(t.pointermove,{...c})):l&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:g}),this[i+"targetShape"]=null)}),o||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=St(e.type),i=jt(e.type);if(!t)return;this.setPointersPositions(e);const n=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"],r={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=ji(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),r[h._id])return;r[h._id]=!0}const u=l.id,g={evt:e,pointerId:u};let c=!1;b["_"+i+"InDblClickWindow"]?(c=!0,clearTimeout(this[i+"DblTimeout"])):q.justDragged||(b["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){b["_"+i+"InDblClickWindow"]=!1},b.dblClickWindow),h&&h.isListening()?(o=!0,this[i+"ClickEndShape"]=h,h._fireAndBubble(t.pointerup,{...g}),b["_"+i+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(t.pointerclick,{...g}),c&&s&&s===h&&h._fireAndBubble(t.pointerdblclick,{...g}))):(this[i+"ClickEndShape"]=null,o||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o=!0),b["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),c&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),o||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),b["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(la,{evt:e}):this._fire(la,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(ca,{evt:e}):this._fire(ca,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=ji(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(Tt,va(e)),Jt(e.pointerId)}_lostpointercapture(e){Jt(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let i=null,n=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,n=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:n},this._pointerPositions=[{x:i,y:n,id:d._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:n,id:d._getFirstPointerId(e)}])}_setPointerPosition(e){d.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Ze({width:this.width(),height:this.height()}),this.bufferHitCanvas=new pa({pixelRatio:1,width:this.width(),height:this.height()}),!b.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return d.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};ti.prototype.nodeType=Pr;$e(ti);_.addGetterSetter(ti,"container");b.isBrowser&&document.addEventListener("visibilitychange",()=>{Qt.forEach(a=>{a.batchDraw()})});const Fr="beforeDraw",Dr="draw",Pn=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Mr=Pn.length;let mt=class extends be{constructor(e){super(e),this.canvas=new Ze,this.hitCanvas=new pa({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){R.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!R.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(R.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(R.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return R.prototype.remove.call(this),e&&e.parentNode&&d._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&d.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),R.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){d.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){d.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,d.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let n=0;n<Mr;n++){const s=Pn[n],r=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),o=r.shape;if(o)return o;if(i=!!r.antialiased,!r.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,n=i[3];if(n===255){const s=d.getHitColorKey(i[0],i[1],i[2]),r=Zt[s];return r?{shape:r}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(e,t,i){const n=this.getLayer(),s=e||n&&n.getCanvas();return this._fire(Fr,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),be.prototype.drawScene.call(this,s,t,i),this._fire(Dr,{node:this}),this}drawHit(e,t){const i=this.getLayer(),n=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),be.prototype.drawHit.call(this,n,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){d.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return d.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return d.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};mt.prototype.nodeType="Layer";$e(mt);_.addGetterSetter(mt,"imageSmoothingEnabled",!0);_.addGetterSetter(mt,"clearBeforeDraw",!0);_.addGetterSetter(mt,"hitGraphEnabled",!0,Ye());class ka extends mt{constructor(e){super(e),this.listening(!1),d.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ka.prototype.nodeType="FastLayer";$e(ka);let ya=class extends be{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&d.throw("You may only add groups and shapes to groups.")}};ya.prototype.nodeType="Group";$e(ya);const Qi=(function(){return ot.performance&&ot.performance.now?function(){return ot.performance.now()}:function(){return new Date().getTime()}})();class Pe{constructor(e,t){this.id=Pe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Qi(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,i=t.length;for(let n=0;n<i;n++)if(t[n]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=Pe.animations,i=t.length;for(let n=0;n<i;n++)if(t[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Qi(),Pe._addAnimation(this),this}stop(){return Pe._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,i=this.animations,n=i.length;for(let s=0;s<n;s++)if(i[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){const e={},t=this.animations;for(let i=0;i<t.length;i++){const n=t[i],s=n.layers,r=n.func;n._updateFrameObject(Qi());const o=s.length;let l;if(r?l=r.call(n,n.frame)!==!1:l=!0,!!l)for(let h=0;h<o;h++){const u=s[h];u._id!==void 0&&(e[u._id]=u)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Pe;e.animations.length?(e._runFrames(),d.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,d.requestAnimFrame(this._animationLoop))}}Pe.animations=[];Pe.animIdCounter=0;Pe.animRunning=!1;const Hr={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Wr=1,Va=2,ja=3,Ja=["fill","stroke","shadowColor"];let qr=0;class Yr{constructor(e,t,i,n,s,r,o){this.prop=e,this.propFunc=t,this.begin=n,this._pos=n,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Va,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=ja,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===Va?this.setTime(e):this.state===ja&&this.setTime(this.duration-e)}pause(){this.state=Wr,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ${constructor(e){const t=this,i=e.node,n=i._id,s=e.easing||$t.Linear,r=!!e.yoyo;let o,l;typeof e.duration>"u"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=i,this._id=qr++;const h=i.getLayer()||(i instanceof b.Stage?i.getLayers():null);h||d.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Pe(function(){t.tween.onEnterFrame()},h),this.tween=new Yr(l,function(u){t._tweenFunc(u)},s,0,1,o*1e3,r),this._addListeners(),$.attrs[n]||($.attrs[n]={}),$.attrs[n][this._id]||($.attrs[n][this._id]={}),$.tweens[n]||($.tweens[n]={});for(l in e)Hr[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const i=this.node,n=i._id;let s,r,o,l,h;const u=$.tweens[n][e];u&&delete $.attrs[n][u][e];let g=i.getAttr(e);if(d._isArray(t))if(s=[],r=Math.max(t.length,g.length),e==="points"&&t.length!==g.length&&(t.length>g.length?(l=g,g=d._prepareArrayForTween(g,t,i.closed())):(o=t,t=d._prepareArrayForTween(t,g,i.closed()))),e.indexOf("fill")===0)for(let c=0;c<r;c++)if(c%2===0)s.push(t[c]-g[c]);else{const k=d.colorToRGBA(g[c]);h=d.colorToRGBA(t[c]),g[c]=k,s.push({r:h.r-k.r,g:h.g-k.g,b:h.b-k.b,a:h.a-k.a})}else for(let c=0;c<r;c++)s.push(t[c]-g[c]);else Ja.indexOf(e)!==-1?(g=d.colorToRGBA(g),h=d.colorToRGBA(t),s={r:h.r-g.r,g:h.g-g.g,b:h.b-g.b,a:h.a-g.a}):s=t-g;$.attrs[n][this._id][e]={start:g,diff:s,end:t,trueEnd:o,trueStart:l},$.tweens[n][e]=this._id}_tweenFunc(e){const t=this.node,i=$.attrs[t._id][this._id];let n,s,r,o,l,h,u,g;for(n in i){if(s=i[n],r=s.start,o=s.diff,g=s.end,d._isArray(r))if(l=[],u=Math.max(r.length,g.length),n.indexOf("fill")===0)for(h=0;h<u;h++)h%2===0?l.push((r[h]||0)+o[h]*e):l.push("rgba("+Math.round(r[h].r+o[h].r*e)+","+Math.round(r[h].g+o[h].g*e)+","+Math.round(r[h].b+o[h].b*e)+","+(r[h].a+o[h].a*e)+")");else for(h=0;h<u;h++)l.push((r[h]||0)+o[h]*e);else Ja.indexOf(n)!==-1?l="rgba("+Math.round(r.r+o.r*e)+","+Math.round(r.g+o.g*e)+","+Math.round(r.b+o.b*e)+","+(r.a+o.a*e)+")":l=r+o*e;t.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=$.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=$.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,i=$.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const n in i)delete $.tweens[e][n];delete $.attrs[e][t],$.tweens[e]&&(Object.keys($.tweens[e]).length===0&&delete $.tweens[e],Object.keys($.attrs[e]).length===0&&delete $.attrs[e])}}$.attrs={};$.tweens={};R.prototype.to=function(a){const e=a.onFinish;a.node=this,a.onFinish=function(){this.destroy(),e&&e()},new $(a).play()};const $t={BackEaseIn(a,e,t,i){return t*(a/=i)*a*((1.70158+1)*a-1.70158)+e},BackEaseOut(a,e,t,i){return t*((a=a/i-1)*a*((1.70158+1)*a+1.70158)+1)+e},BackEaseInOut(a,e,t,i){let n=1.70158;return(a/=i/2)<1?t/2*(a*a*(((n*=1.525)+1)*a-n))+e:t/2*((a-=2)*a*(((n*=1.525)+1)*a+n)+2)+e},ElasticEaseIn(a,e,t,i,n,s){let r=0;return a===0?e:(a/=i)===1?e+t:(s||(s=i*.3),!n||n<Math.abs(t)?(n=t,r=s/4):r=s/(2*Math.PI)*Math.asin(t/n),-(n*Math.pow(2,10*(a-=1))*Math.sin((a*i-r)*(2*Math.PI)/s))+e)},ElasticEaseOut(a,e,t,i,n,s){let r=0;return a===0?e:(a/=i)===1?e+t:(s||(s=i*.3),!n||n<Math.abs(t)?(n=t,r=s/4):r=s/(2*Math.PI)*Math.asin(t/n),n*Math.pow(2,-10*a)*Math.sin((a*i-r)*(2*Math.PI)/s)+t+e)},ElasticEaseInOut(a,e,t,i,n,s){let r=0;return a===0?e:(a/=i/2)===2?e+t:(s||(s=i*(.3*1.5)),!n||n<Math.abs(t)?(n=t,r=s/4):r=s/(2*Math.PI)*Math.asin(t/n),a<1?-.5*(n*Math.pow(2,10*(a-=1))*Math.sin((a*i-r)*(2*Math.PI)/s))+e:n*Math.pow(2,-10*(a-=1))*Math.sin((a*i-r)*(2*Math.PI)/s)*.5+t+e)},BounceEaseOut(a,e,t,i){return(a/=i)<1/2.75?t*(7.5625*a*a)+e:a<2/2.75?t*(7.5625*(a-=1.5/2.75)*a+.75)+e:a<2.5/2.75?t*(7.5625*(a-=2.25/2.75)*a+.9375)+e:t*(7.5625*(a-=2.625/2.75)*a+.984375)+e},BounceEaseIn(a,e,t,i){return t-$t.BounceEaseOut(i-a,0,t,i)+e},BounceEaseInOut(a,e,t,i){return a<i/2?$t.BounceEaseIn(a*2,0,t,i)*.5+e:$t.BounceEaseOut(a*2-i,0,t,i)*.5+t*.5+e},EaseIn(a,e,t,i){return t*(a/=i)*a+e},EaseOut(a,e,t,i){return-t*(a/=i)*(a-2)+e},EaseInOut(a,e,t,i){return(a/=i/2)<1?t/2*a*a+e:-t/2*(--a*(a-2)-1)+e},StrongEaseIn(a,e,t,i){return t*(a/=i)*a*a*a*a+e},StrongEaseOut(a,e,t,i){return t*((a=a/i-1)*a*a*a*a+1)+e},StrongEaseInOut(a,e,t,i){return(a/=i/2)<1?t/2*a*a*a*a*a+e:t/2*((a-=2)*a*a*a*a+2)+e},Linear(a,e,t,i){return t*a/i+e}},Bn=d._assign(b,{Util:d,Transform:Qe,Node:R,Container:be,Stage:ti,stages:Qt,Layer:mt,FastLayer:ka,Group:ya,DD:q,Shape:y,shapes:Zt,Animation:Pe,Tween:$,Easings:$t,Context:Ai,Canvas:fa});function Ct(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=O(e,"scale",15),r=O(e,"scaleX",15),o=O(e,"scaleY",15),l=O(e,"rotation",15),h=O(e,"skewX",15),u=O(e,"skewY",15),g=Rt(e,["$$slots","$$events","$$legacy","children","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new Bn.Group({x:i(),y:n(),scale:s(),scaleX:r(),scaleY:o(),rotation:l(),skewX:h(),skewY:u(),...g});if(Ri().add(c),!t()){const v=c.getAttrs();c.on("transformend",()=>{i()!==void 0&&i(v.x),n()!==void 0&&n(v.y),s()!==void 0&&s(v.scale),r()!==void 0&&r(v.scaleX),o()!==void 0&&o(v.scaleY),l()!==void 0&&l(v.rotation),h()!==void 0&&h(v.skewX),u()!==void 0&&u(v.skewY)}),c.on("dragend",()=>{i()!==void 0&&i(v.x),n()!==void 0&&n(v.y)})}Object.keys(g).filter(v=>!v.startsWith("on")).forEach(v=>{I(()=>{c.setAttr(v,g[v])})}),I(()=>{c.setAttr("x",i())}),I(()=>{c.setAttr("y",n())}),I(()=>{c.setAttr("scale",s())}),I(()=>{c.setAttr("scaleX",r())}),I(()=>{c.setAttr("scaleY",o())}),I(()=>{c.setAttr("rotation",l())}),I(()=>{c.setAttr("skewX",h())}),I(()=>{c.setAttr("skewY",u())}),xt(g,c),_a(Et.Group,c),At(()=>{c.destroy()});var k={node:c},f=Ae(),w=he(f);return ga(w,()=>e.children??ma),Q(a,f),ct(k)}let Be=class In extends y{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),i=this.getHeight(),n=this.cornerRadius(),s=this.attrs.image;let r;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?r=[s,this.cropX(),this.cropY(),o,l,0,0,t,i]:r=[s,0,0,t,i]}(this.hasFill()||this.hasStroke()||n)&&(e.beginPath(),n?d.drawRoundedRectPath(e,t,i,n):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),s&&(n&&e.clip(),e.drawImage.apply(e,r))}_hitFunc(e){const t=this.width(),i=this.height(),n=this.cornerRadius();e.beginPath(),n?d.drawRoundedRectPath(e,t,i,n):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width)!==null&&i!==void 0?i:0}getHeight(){var e,t,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}static fromURL(e,t,i=null){const n=d.createImageElement();n.onload=function(){const s=new In({image:n});t(s)},n.onerror=i,n.crossOrigin="Anonymous",n.src=e}};Be.prototype.className="Image";Be.prototype._attrsAffectingSize=["image"];$e(Be);_.addGetterSetter(Be,"cornerRadius",0,hn(4));_.addGetterSetter(Be,"image");_.addComponentsGetterSetter(Be,"crop",["x","y","width","height"]);_.addGetterSetter(Be,"cropX",0,G());_.addGetterSetter(Be,"cropY",0,G());_.addGetterSetter(Be,"cropWidth",0,G());_.addGetterSetter(Be,"cropHeight",0,G());function $i(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=O(e,"scale",15),r=O(e,"scaleX",15),o=O(e,"scaleY",15),l=O(e,"rotation",15),h=O(e,"skewX",15),u=O(e,"skewY",15),g=Rt(e,["$$slots","$$events","$$legacy","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new Be({x:i(),y:n(),scale:s(),scaleX:r(),scaleY:o(),rotation:l(),skewX:h(),skewY:u(),...g});if(Ri().add(c),!t()){const f=c.getAttrs();c.on("transformend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y),s()!==void 0&&s(f.scale),r()!==void 0&&r(f.scaleX),o()!==void 0&&o(f.scaleY),l()!==void 0&&l(f.rotation),h()!==void 0&&h(f.skewX),u()!==void 0&&u(f.skewY)}),c.on("dragend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y)})}Object.keys(g).filter(f=>!f.startsWith("on")).forEach(f=>{I(()=>{c.setAttr(f,g[f])})}),I(()=>{c.setAttr("x",i())}),I(()=>{c.setAttr("y",n())}),I(()=>{c.setAttr("scale",s())}),I(()=>{c.setAttr("scaleX",r())}),I(()=>{c.setAttr("scaleY",o())}),I(()=>{c.setAttr("rotation",l())}),I(()=>{c.setAttr("skewX",h())}),I(()=>{c.setAttr("skewY",u())}),xt(g,c),At(()=>{c.destroy()});var k={node:c};return ct(k)}function Xr(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=O(e,"scale",15),r=O(e,"scaleX",15),o=O(e,"scaleY",15),l=O(e,"rotation",15),h=O(e,"skewX",15),u=O(e,"skewY",15),g=Rt(e,["$$slots","$$events","$$legacy","children","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new Bn.Layer({x:i(),y:n(),scale:s(),scaleX:r(),scaleY:o(),rotation:l(),skewX:h(),skewY:u(),...g});if(xr().add(c),!t()){const v=c.getAttrs();c.on("transformend",()=>{i()!==void 0&&i(v.x),n()!==void 0&&n(v.y),s()!==void 0&&s(v.scale),r()!==void 0&&r(v.scaleX),o()!==void 0&&o(v.scaleY),l()!==void 0&&l(v.rotation),h()!==void 0&&h(v.skewX),u()!==void 0&&u(v.skewY)}),c.on("dragend",()=>{i()!==void 0&&i(v.x),n()!==void 0&&n(v.y)})}Object.keys(g).filter(v=>!v.startsWith("on")).forEach(v=>{I(()=>{c.setAttr(v,g[v])})}),I(()=>{c.setAttr("x",i())}),I(()=>{c.setAttr("y",n())}),I(()=>{c.setAttr("scale",s())}),I(()=>{c.setAttr("scaleX",r())}),I(()=>{c.setAttr("scaleY",o())}),I(()=>{c.setAttr("rotation",l())}),I(()=>{c.setAttr("skewX",h())}),I(()=>{c.setAttr("skewY",u())}),xt(g,c),_a(Et.Layer,c),At(()=>{c.destroy()});var k={node:c},f=Ae(),w=he(f);return ga(w,()=>e.children??ma),Q(a,f),ct(k)}let xi=class extends y{_sceneFunc(e){const t=this.cornerRadius(),i=this.width(),n=this.height();e.beginPath(),t?d.drawRoundedRectPath(e,i,n,t):e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}};xi.prototype.className="Rect";$e(xi);_.addGetterSetter(xi,"cornerRadius",0,hn(4));function Si(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=O(e,"scale",15),r=O(e,"scaleX",15),o=O(e,"scaleY",15),l=O(e,"rotation",15),h=O(e,"skewX",15),u=O(e,"skewY",15),g=Rt(e,["$$slots","$$events","$$legacy","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new xi({x:i(),y:n(),scale:s(),scaleX:r(),scaleY:o(),rotation:l(),skewX:h(),skewY:u(),...g});if(Ri().add(c),!t()){const f=c.getAttrs();c.on("transformend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y),s()!==void 0&&s(f.scale),r()!==void 0&&r(f.scaleX),o()!==void 0&&o(f.scaleY),l()!==void 0&&l(f.rotation),h()!==void 0&&h(f.skewX),u()!==void 0&&u(f.skewY)}),c.on("dragend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y)})}Object.keys(g).filter(f=>!f.startsWith("on")).forEach(f=>{I(()=>{c.setAttr(f,g[f])})}),I(()=>{c.setAttr("x",i())}),I(()=>{c.setAttr("y",n())}),I(()=>{c.setAttr("scale",s())}),I(()=>{c.setAttr("scaleX",r())}),I(()=>{c.setAttr("scaleY",o())}),I(()=>{c.setAttr("rotation",l())}),I(()=>{c.setAttr("skewX",h())}),I(()=>{c.setAttr("skewY",u())}),xt(g,c),At(()=>{c.destroy()});var k={node:c};return ct(k)}var Ur=ke("<div><!></div>");function zr(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=Rt(e,["$$slots","$$events","$$legacy","children","staticConfig","x","y","divWrapperProps"]),r,o;try{o=document.createElement("div")}catch(c){throw new Error("svelte-konva: Library can only be used in a browser context but is currently used in a server environment. If you are using SvelteKit, please refer to the following docs: https://konvajs.org/docs/svelte/SvelteKit.html",{cause:c})}const l=new ti({container:o,y:n(),x:i(),...s});if(!t()){const c=l.getAttrs();l.on("dragend",()=>{i()!==void 0&&i(c.x),n()!==void 0&&n(c.y)})}Object.keys(s).filter(c=>!c.startsWith("on")).forEach(c=>{I(()=>{l.setAttr(c,s[c])})}),I(()=>{l.setAttr("x",i())}),I(()=>{l.setAttr("y",n())}),xt(s,l),_a(Et.Stage,l),nn(()=>{l.setContainer(r)}),At(()=>{l.destroy()});var h={node:l},u=Ur();Ss(u,()=>({...e.divWrapperProps}));var g=ce(u);return ga(g,()=>e.children??ma),ne(u),na(u,c=>r=c,()=>r),Q(a,u),ct(h)}function rt(a){return[...a].reduce((e,t,i,n)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const s=n[i+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(t+s),n[i+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(n[i+1]||""))?e.push(t+n[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const wt="auto",Kr="center",On="inherit",Yt="justify",Vr="Change.konva",jr="2d",Za="-",Ln="left",Jr="text",Zr="Text",Qr="top",$r="bottom",Qa="middle",Gn="normal",eo="px ",Ci=" ",to="right",$a="rtl",io="word",ao="char",en="none",ea="",Nn=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],no=Nn.length;function so(a){return a.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}let wi;function ta(){return wi||(wi=d.createCanvasElement().getContext(jr),wi)}function ro(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function oo(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function lo(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let ie=class extends y{constructor(e){super(lo(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<no;t++)this.on(Nn[t]+Vr,this._setTextData);this._setTextData()}_sceneFunc(e){var t,i;const n=this.textArr,s=n.length;if(!this.text())return;let r=this.padding(),o=this.fontSize(),l=this.lineHeight()*o,h=this.verticalAlign(),u=this.direction(),g=0,c=this.align(),k=this.getWidth(),f=this.letterSpacing(),w=this.charRenderFunc(),v=this.fill(),E=this.textDecoration(),J=E.indexOf("underline")!==-1,ee=E.indexOf("line-through")!==-1,B;u=u===On?e.direction:u;let D=l/2,se=Qa;if(!b.legacyTextRendering){const N=this.measureSize("M");se="alphabetic";const K=(t=N.fontBoundingBoxAscent)!==null&&t!==void 0?t:N.actualBoundingBoxAscent,re=(i=N.fontBoundingBoxDescent)!==null&&i!==void 0?i:N.actualBoundingBoxDescent;D=(K-re)/2+l/2}for(u===$a&&e.setAttr("direction",u),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",se),e.setAttr("textAlign",Ln),h===Qa?g=(this.getHeight()-s*l-r*2)/2:h===$r&&(g=this.getHeight()-s*l-r*2),e.translate(r,g+r),B=0;B<s;B++){let N=0,K=0;const re=n[B],z=re.text,fe=re.width,_e=re.lastInParagraph;if(e.save(),c===to?N+=k-fe-r*2:c===Kr&&(N+=(k-fe-r*2)/2),J){e.save(),e.beginPath();const ye=b.legacyTextRendering?Math.round(o/2):Math.round(o/4),Se=N,ue=D+K+ye;e.moveTo(Se,ue);const Ce=c===Yt&&!_e?k-r*2:fe;e.lineTo(Se+Math.round(Ce),ue),e.lineWidth=o/15;const et=this._getLinearGradient();e.strokeStyle=et||v,e.stroke(),e.restore()}const Te=N;if(u!==$a&&(f!==0||c===Yt||w)){const ye=z.split(" ").length-1,Se=rt(z);for(let ue=0;ue<Se.length;ue++){const Ce=Se[ue];if(Ce===" "&&!_e&&c===Yt&&(N+=(k-r*2-fe)/ye),this._partialTextX=N,this._partialTextY=D+K,this._partialText=Ce,w){e.save();const Pi=n.slice(0,B).reduce((C,T)=>C+rt(T.text).length,0),Bi=ue+Pi;w({char:Ce,index:Bi,x:N,y:D+K,lineIndex:B,column:ue,isLastInLine:_e,width:this.measureSize(Ce).width,context:e})}e.fillStrokeShape(this),w&&e.restore(),N+=this.measureSize(Ce).width+f}}else f!==0&&e.setAttr("letterSpacing",`${f}px`),this._partialTextX=N,this._partialTextY=D+K,this._partialText=z,e.fillStrokeShape(this);if(ee){e.save(),e.beginPath();const ye=b.legacyTextRendering?0:-Math.round(o/4),Se=Te;e.moveTo(Se,D+K+ye);const ue=c===Yt&&!_e?k-r*2:fe;e.lineTo(Se+Math.round(ue),D+K+ye),e.lineWidth=o/15;const Ce=this._getLinearGradient();e.strokeStyle=Ce||v,e.stroke(),e.restore()}e.restore(),s>1&&(D+=l)}}_hitFunc(e){const t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=d._isString(e)?e:e==null?"":e+"";return this._setAttr(Jr,t),this}getWidth(){return this.attrs.width===wt||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===wt||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return d.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,n,s,r,o,l,h,u,g,c;let k=ta(),f=this.fontSize(),w;k.save(),k.font=this._getContextFont(),w=k.measureText(e),k.restore();const v=f/100;return{actualBoundingBoxAscent:(t=w.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*v,actualBoundingBoxDescent:(i=w.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(n=w.actualBoundingBoxLeft)!==null&&n!==void 0?n:-7.421875*v,actualBoundingBoxRight:(s=w.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*v,alphabeticBaseline:(r=w.alphabeticBaseline)!==null&&r!==void 0?r:0,emHeightAscent:(o=w.emHeightAscent)!==null&&o!==void 0?o:100*v,emHeightDescent:(l=w.emHeightDescent)!==null&&l!==void 0?l:-20*v,fontBoundingBoxAscent:(h=w.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*v,fontBoundingBoxDescent:(u=w.fontBoundingBoxDescent)!==null&&u!==void 0?u:21*v,hangingBaseline:(g=w.hangingBaseline)!==null&&g!==void 0?g:72.80000305175781*v,ideographicBaseline:(c=w.ideographicBaseline)!==null&&c!==void 0?c:-21*v,width:w.width,height:f}}_getContextFont(){return this.fontStyle()+Ci+this.fontVariant()+Ci+(this.fontSize()+eo)+so(this.fontFamily())}_addTextLine(e){this.align()===Yt&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),i=e.length;return ta().measureText(e).width+t*i}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,n=this.lineHeight()*t,s=this.attrs.width,r=this.attrs.height,o=s!==wt&&s!==void 0,l=r!==wt&&r!==void 0,h=this.padding(),u=s-h*2,g=r-h*2,c=0,k=this.wrap(),f=k!==en,w=k!==ao&&f,v=this.ellipsis();this.textArr=[],ta().font=this._getContextFont();const E=v?this._getTextWidth(ea):0;for(let J=0,ee=e.length;J<ee;++J){let B=e[J],D=this._getTextWidth(B);if(o&&D>u)for(;B.length>0;){let se=0,N=rt(B).length,K="",re=0;for(;se<N;){const z=se+N>>>1,fe=rt(B),_e=fe.slice(0,z+1).join(""),Te=this._getTextWidth(_e);(v&&l&&c+n>g?Te+E:Te)<=u?(se=z+1,K=_e,re=Te):N=z}if(K){if(w){const _e=rt(B),Te=rt(K),ye=_e[Te.length],Se=ye===Ci||ye===Za;let ue;if(Se&&re<=u)ue=Te.length;else{const Ce=Te.lastIndexOf(Ci),et=Te.lastIndexOf(Za);ue=Math.max(Ce,et)+1}ue>0&&(se=ue,K=_e.slice(0,se).join(""),re=this._getTextWidth(K))}if(K=K.trimRight(),this._addTextLine(K),i=Math.max(i,re),c+=n,this._shouldHandleEllipsis(c)){this._tryToAddEllipsisToLastLine();break}if(B=rt(B).slice(se).join("").trimLeft(),B.length>0&&(D=this._getTextWidth(B),D<=u)){this._addTextLine(B),c+=n,i=Math.max(i,D);break}}else break}else this._addTextLine(B),c+=n,i=Math.max(i,D),this._shouldHandleEllipsis(c)&&J<ee-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&c+n>g)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){const t=+this.fontSize(),i=this.lineHeight()*t,n=this.attrs.height,s=n!==wt&&n!==void 0,r=this.padding(),o=n-r*2;return!(this.wrap()!==en)||s&&e+i>o}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==wt&&e!==void 0,i=this.padding(),n=e-i*2,s=this.ellipsis(),r=this.textArr[this.textArr.length-1];!r||!s||(t&&(this._getTextWidth(r.text+ea)<n||(r.text=r.text.slice(0,r.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+ea))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};ie.prototype._fillFunc=ro;ie.prototype._strokeFunc=oo;ie.prototype.className=Zr;ie.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];$e(ie);_.overWriteSetter(ie,"width",da());_.overWriteSetter(ie,"height",da());_.addGetterSetter(ie,"direction",On);_.addGetterSetter(ie,"fontFamily","Arial");_.addGetterSetter(ie,"fontSize",12,G());_.addGetterSetter(ie,"fontStyle",Gn);_.addGetterSetter(ie,"fontVariant",Gn);_.addGetterSetter(ie,"padding",0,G());_.addGetterSetter(ie,"align",Ln);_.addGetterSetter(ie,"verticalAlign",Qr);_.addGetterSetter(ie,"lineHeight",1,G());_.addGetterSetter(ie,"wrap",io);_.addGetterSetter(ie,"ellipsis",!1,Ye());_.addGetterSetter(ie,"letterSpacing",0,G());_.addGetterSetter(ie,"text","",ut());_.addGetterSetter(ie,"textDecoration","");_.addGetterSetter(ie,"charRenderFunc",void 0);function ve(a,e){lt(e,!0);let t=O(e,"staticConfig",3,!1),i=O(e,"x",15),n=O(e,"y",15),s=O(e,"scale",15),r=O(e,"scaleX",15),o=O(e,"scaleY",15),l=O(e,"rotation",15),h=O(e,"skewX",15),u=O(e,"skewY",15),g=Rt(e,["$$slots","$$events","$$legacy","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new ie({x:i(),y:n(),scale:s(),scaleX:r(),scaleY:o(),rotation:l(),skewX:h(),skewY:u(),...g});if(Ri().add(c),!t()){const f=c.getAttrs();c.on("transformend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y),s()!==void 0&&s(f.scale),r()!==void 0&&r(f.scaleX),o()!==void 0&&o(f.scaleY),l()!==void 0&&l(f.rotation),h()!==void 0&&h(f.skewX),u()!==void 0&&u(f.skewY)}),c.on("dragend",()=>{i()!==void 0&&i(f.x),n()!==void 0&&n(f.y)})}Object.keys(g).filter(f=>!f.startsWith("on")).forEach(f=>{I(()=>{c.setAttr(f,g[f])})}),I(()=>{c.setAttr("x",i())}),I(()=>{c.setAttr("y",n())}),I(()=>{c.setAttr("scale",s())}),I(()=>{c.setAttr("scaleX",r())}),I(()=>{c.setAttr("scaleY",o())}),I(()=>{c.setAttr("rotation",l())}),I(()=>{c.setAttr("skewX",h())}),I(()=>{c.setAttr("skewY",u())}),xt(g,c),At(()=>{c.destroy()});var k={node:c};return ct(k)}const co="Talynn",ho="0.3.0 (+579)",uo=809664,mo=49,go=4038,fo={agility:294987,carpentry:14851,cooking:6686,crafting:7362,fishing:18641,foraging:70262,mining:40345,smithing:7916,trinketry:618,woodcutting:65414},po={head:"warm_beanie",cape:"herberts_cape",back:"grappling_hook",chest:"warm_jacket",legs:"pants_of_haste",neck:"jarvonian_flower_necklace_common",feet:"oak_skis",ring_1:"shiny_ring",ring_2:"simple_ring",hands:"knitted_mittens",primary:"copper_sword_rare",secondary:"copper_shield_common",tool_1:"hand_warming_pack",tool_2:"small_sack",tool_3:"trash_grabber",tool_4:"rusty_hatchet",tool_5:"hand_lantern"},vo={},_o={basic_sickle_uncommon:1,steel_pickaxe_common:1,wanderlust_walking_stick_common:1,ring_of_homesickness:1,frost_touched_leggings:1,golden_skydisc:1,precise_ruler:1,gold_pan:1,map_of_jarvonia:2,simple_torch:2,hand_warming_pack:4,knitted_mittens:1,rusty_diving_helmet:1,rusty_diving_leggings:1,rusty_diving_torso:1,rusty_fishing_net:1,rusty_fishing_rod:1,simple_hammer:1,simple_saw:1,tiny_backpack:1,spruce_logs:44,spruce_plank:18,birch_plank:9,teak_plank:4,willow_plank:5,protective_pants:1},ko={},yo=["black_eye_peak_wilderness_permit","easter_egg","floating_coral","jarvonian_crossword_puzzle","jarvonian_letter_of_passage","mysterious_northern_map","petrified_branch","treasure_hunter_token"],So={birch_logs:124,farganite_ore:119,sunblossom:43,raw_salmon:11,stone:320,tin_ore:39,tarsilium_ore:228,wooden_stick:167,spruce_plank:0,sturdy_whisk:1,oak_plank_fine:6,maple_plank:21,pine_plank:22,birch_logs_fine:7,iron_ore:102,salt_crystal_fine:2,salt_crystal:3,stone_fine:5,twine:75,tin_ore_fine:1,pine_logs_fine:1,flax:370,tarsilium_ore_fine:7,maple_logs:35,spruce_logs_fine:1,coal:1843,spruce_logs:59,copper_ore_fine:1,large_stone:2,simple_hammer:1,copper_bar:0,honeycomb:23,thistle:33,lumberjack_hat:5,spicy_pumpkin_juice:4,copper_ore:26,pine_logs:21,iron_ore_fine:15,juggling_balls:1,birch_plank:1,smelly_socks:0,map_of_jarvonia:3,simple_torch:9,pancake:18,berries_fine:3,fishbone:45,willow_plank:10,iron_bar:0,fishing_line:5,simple_chisel:1,light_mining_shovel:1,dynamite:19,beer_fine:2,feather_cape:1,lumberjack_sandals:1,non_waterproof_boots:1,steel_toe_boots:1,squishy_flip_flops:1,frost_touched_boots:5,lumberjack_pants:1,foraging_shirt:1,foraging_shorts:1,waterproof_boots:3,ice_axe:1,tree_scaling_claws:1,rusty_spyglass:1,pointy_shears:1,simple_amulet:1,camouflage_cape:2,water_bottle:1,iron_thermos:1,grappling_hook:4,coal_fine:31,milkweed:10,grass:24,running_shorts:3,mud:23,adventurers_guild_token:24,gardening_gloves:1,herberts_boots:1,pathfinder:1,running_shirt:2,omni_tool:1,wine:16,flax_fine:6,sea_shell:51,mangrove_plank:4,fried_noodles:2,log_splitter:3,foresters_pants:1,running_visor:1,silver_nugget:14,perfect_snowballs:4,simple_rope:1,snowdrop:4,moondaisy:48,opal:9,silver_bar:4,rough_star_pearl:2,sturdy_branch:5,egg:20,lumberjack_shirt:2,oak_logs_fine:2,rough_opal:4,metal_scrap:52,wood_scrap:258,trash:90,hand_warming_pack:1,raw_jellyfish:16,raw_lobster:11,nettle_tea:34,berries:88,bread:38,porridge:60,tomato:1,potato:8,chefs_apron:1,cooked_trout:10,schnitzel:2,jarvonian_pastry_fine:1,knitted_mittens:1,frost_touched_leggings:2,pine_skis:1,herberts_shirt:1,clay_skydisc:1,mushroom:88,carrot:59,mushroom_fine:2,oak_logs:29,frost_touched_torso:1,oak_plank:17,gold_pan:2,birch_skis:1,jarvonian_pastry:7,wooden_stick_fine:3,hand_lantern:1,raw_shrimp:3,fingerpick:1,gold_nugget:10,frozen_bait_fine:1},Co={jarvonia:63.33,herberts_guiding_grounds:5,syrenthia:0,trellin:0,erdwise:0,halfling_rebels:0},tn={name:co,game_version:ho,steps:uo,achievement_points:mo,coins:go,skills:fo,gear:po,consumables:vo,inventory:_o,chests:ko,collectibles:yo,bank:So,reputation:Co},an=JSON.parse(`[{"name":"Create a Birch Plank (Scrap)","output":"Birch Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":1,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Birch Plank","output":"Birch Plank","requirements":{"materials":[{"name":"Birch Logs","amount":1,"icon":"./materials/birch_logs.svg"}],"profession":{"name":"Carpentry","level":1,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Make a Wooden Shield","output":"Wooden Shield","requirements":{"materials":[{"name":"Birch Plank","amount":1,"icon":"./materials/birch_plank.svg"}],"profession":{"name":"Carpentry","level":1,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Make a Wooden Sword","output":"Wooden Sword","requirements":{"materials":[{"name":"Birch Plank","amount":1,"icon":"./materials/birch_plank.svg"}],"profession":{"name":"Carpentry","level":1,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create a Pine Plank (Scrap)","output":"Pine Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":10,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Pine Plank","output":"Pine Plank","requirements":{"materials":[{"name":"Pine Logs","amount":1,"icon":"./materials/pine_logs.svg"}],"profession":{"name":"Carpentry","level":10,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create a Spruce Plank (Scrap)","output":"Spruce Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":20,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Spruce Plank","output":"Spruce Plank","requirements":{"materials":[{"name":"Spruce Logs","amount":1,"icon":"./materials/spruce_logs.svg"}],"profession":{"name":"Carpentry","level":20,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create an Oak Plank (Scrap)","output":"Oak Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":25,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut an Oak Plank","output":"Oak Plank","requirements":{"materials":[{"name":"Oak Logs","amount":1,"icon":"./materials/oak_logs.svg"}],"profession":{"name":"Carpentry","level":25,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create a Maple Plank (Scrap)","output":"Maple Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":30,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Maple Plank","output":"Maple Plank","requirements":{"materials":[{"name":"Maple Logs","amount":1,"icon":"./materials/maple_logs.svg"}],"profession":{"name":"Carpentry","level":30,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create a Teak Plank (Scrap)","output":"Teak Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":40,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Create a Willow Plank (Scrap)","output":"Willow Plank","requirements":{"materials":[{"name":"Wood Scrap","amount":1,"icon":"./materials/wood_scrap.svg"}],"profession":{"name":"Carpentry","level":40,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Teak Plank","output":"Teak Plank","requirements":{"materials":[{"name":"Teak Logs","amount":1,"icon":"./materials/teak_logs.svg"}],"profession":{"name":"Carpentry","level":40,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Willow Plank","output":"Willow Plank","requirements":{"materials":[{"name":"Willow Logs","amount":1,"icon":"./materials/willow_logs.svg"}],"profession":{"name":"Carpentry","level":40,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Bamboo Plank","output":"Bamboo Plank","requirements":{"materials":[{"name":"Bamboo Logs","amount":1,"icon":"./materials/bamboo_logs.svg"}],"profession":{"name":"Carpentry","level":45,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Coral Plank","output":"Coral Plank","requirements":{"materials":[{"name":"Coral","amount":1,"icon":"./materials/coral.svg"}],"profession":{"name":"Carpentry","level":45,"icon":"./professions/carpentry.svg"},"service":"Basic Sawmill"}},{"name":"Cut a Mangrove Plank","output":"Mangrove Plank","requirements":{"materials":[{"name":"Mangrove Logs","amount":1,"icon":"./materials/mangrove_logs.svg"}],"profession":{"name":"Carpentry","level":50,"icon":"./professions/carpentry.svg"},"service":"Advanced Sawmill"}},{"name":"Fry a  Perch","output":"Perch","requirements":{"materials":[{"name":"Raw Perch","amount":1,"icon":"./materials/raw_perch.svg"}],"profession":{"name":"Cooking","level":1,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Shrimp","output":"Shrimp","requirements":{"materials":[{"name":"Raw Shrimp","amount":1,"icon":"./materials/raw_shrimp.svg"}],"profession":{"name":"Cooking","level":1,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Brew Nettle Tea","output":"Nettle Tea","requirements":{"materials":[{"name":"Nettle","amount":1,"icon":"./materials/nettle.svg"}],"profession":{"name":"Cooking","level":3,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry  a Carp","output":"a Carp","requirements":{"materials":[{"name":"Raw Carp","amount":1,"icon":"./materials/raw_carp.svg"}],"profession":{"name":"Cooking","level":5,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Bake Bread","output":"Bread","requirements":{"materials":[{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"}],"profession":{"name":"Cooking","level":8,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Pike","output":"Pike","requirements":{"materials":[{"name":"Raw Pike","amount":1,"icon":"./materials/raw_pike.svg"}],"profession":{"name":"Cooking","level":10,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Porridge","output":"Porridge","requirements":{"materials":[{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"}],"profession":{"name":"Cooking","level":15,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Pancakes","output":"Pancakes","requirements":{"materials":[{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"},{"name":"Milk","amount":1,"icon":"./materials/milk.svg"}],"profession":{"name":"Cooking","level":17,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Trout","output":"Trout","requirements":{"materials":[{"name":"Raw Trout","amount":1,"icon":"./materials/raw_trout.svg"}],"profession":{"name":"Cooking","level":20,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Mix Chocolate Milk","output":"Chocolate Milk","requirements":{"materials":[{"name":"Chocolate","amount":1,"icon":"./materials/chocolate.svg"},{"name":"Milk","amount":1,"icon":"./materials/milk.svg"}],"profession":{"name":"Cooking","level":22,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Bake a Bagel","output":"Bagel","requirements":{"materials":[{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"}],"profession":{"name":"Cooking","level":25,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Milk","output":"Milk","requirements":{"materials":[{"name":"Milkweed","amount":1,"icon":"./materials/milkweed.svg"}],"profession":{"name":"Cooking","level":25,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Pickles","output":"Pickles","requirements":{"materials":[{"name":"Cucumber","amount":1,"icon":"./materials/cucumber.svg"},{"name":"Salt Crystal","amount":1,"icon":"./materials/salt_crystal.svg"}],"profession":{"name":"Cooking","level":27,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry  a Salmon","output":"a Salmon","requirements":{"materials":[{"name":"Raw Salmon","amount":1,"icon":"./materials/raw_salmon.svg"}],"profession":{"name":"Cooking","level":30,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Jellyfish","output":"Jellyfish","requirements":{"materials":[{"name":"Raw Jellyfish","amount":1,"icon":"./materials/raw_jellyfish.svg"}],"profession":{"name":"Cooking","level":30,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Trout Soup","output":"Trout Soup","requirements":{"materials":[{"name":"Raw Trout","amount":1,"icon":"./materials/raw_trout.svg"}],"profession":{"name":"Cooking","level":30,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make Mushroom Curry","output":"Mushroom Curry","requirements":{"materials":[{"name":"Mushroom","amount":1,"icon":"./materials/mushroom.svg"},{"name":"Tomato","amount":1,"icon":"./materials/tomato.svg"}],"profession":{"name":"Cooking","level":32,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Lobster","output":"Lobster","requirements":{"materials":[{"name":"Raw Lobster","amount":1,"icon":"./materials/raw_lobster.svg"}],"profession":{"name":"Cooking","level":35,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make a Mud Pie","output":"Mud Pie","requirements":{"materials":[{"name":"Mud","amount":1,"icon":"./materials/mud.svg"},{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"}],"profession":{"name":"Cooking","level":35,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Harden Kelp","output":"Harden Kelp","requirements":{"materials":[{"name":"Kelp","amount":1,"icon":"./materials/kelp.svg"}],"profession":{"name":"Cooking","level":35,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Prepare a  Kelp Roll","output":"Kelp Roll","requirements":{"materials":[{"name":"Sweet Kelp","amount":1,"icon":"./materials/sweet_kelp.svg"}],"profession":{"name":"Cooking","level":36,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make a Jelly Sandwich","output":"Jelly Sandwich","requirements":{"materials":[{"name":"Berries","amount":1,"icon":"./materials/berries.svg"},{"name":"Bread","amount":1,"icon":"./materials/bread.svg"}],"profession":{"name":"Cooking","level":37,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Assemble Dynamite","output":"Dynamite","requirements":{"materials":[{"name":"Salt Crystal","amount":1,"icon":"./materials/salt_crystal.svg"},{"name":"Volcanic Ash","amount":1,"icon":"./materials/volcanic_ash.svg"}],"profession":{"name":"Cooking","level":38,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Swordfish","output":"Swordfish","requirements":{"materials":[{"name":"Raw Swordfish","amount":1,"icon":"./materials/raw_swordfish.svg"}],"profession":{"name":"Cooking","level":40,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make a Roasted Bell Pepper","output":"Roasted Bell Pepper","requirements":{"materials":[{"name":"Bell Pepper","amount":1,"icon":"./materials/bell_pepper.svg"},{"name":"Pepper","amount":1,"icon":"./materials/pepper.svg"}],"profession":{"name":"Cooking","level":44,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Brew Saltrum","output":"Saltrum","requirements":{"materials":[{"name":"Salty Hops","amount":1,"icon":"./materials/salty_hops.svg"},{"name":"Salt Crystal","amount":1,"icon":"./materials/salt_crystal.svg"}],"profession":{"name":"Cooking","level":45,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry  a Stingray","output":"a Stingray","requirements":{"materials":[{"name":"Raw Stingray","amount":1,"icon":"./materials/raw_stingray.svg"}],"profession":{"name":"Cooking","level":45,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry a  Squid","output":"Squid","requirements":{"materials":[{"name":"Raw Squid","amount":1,"icon":"./materials/raw_squid.svg"}],"profession":{"name":"Cooking","level":45,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make a Sweet Carrot Pie","output":"Sweet Carrot Pie","requirements":{"materials":[{"name":"Carrot","amount":1,"icon":"./materials/carrot.svg"},{"name":"Honeycomb","amount":1,"icon":"./materials/honeycomb.svg"},{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"},{"name":"Egg","amount":1,"icon":"./materials/egg.svg"},{"name":"Potato","amount":1,"icon":"./materials/potato.svg"}],"profession":{"name":"Cooking","level":45,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Bake Salmon Pie","output":"Salmon Pie","requirements":{"materials":[{"name":"Raw Salmon","amount":1,"icon":"./materials/raw_salmon.svg"},{"name":"Wheat","amount":1,"icon":"./materials/wheat.svg"},{"name":"Egg","amount":1,"icon":"./materials/egg.svg"},{"name":"Potato","amount":1,"icon":"./materials/potato.svg"}],"profession":{"name":"Cooking","level":46,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Make a Fried Fish Sandwich","output":"Fried Fish Sandwich","requirements":{"materials":[{"name":"Raw Swordfish","amount":1,"icon":"./materials/raw_swordfish.svg"},{"name":"Bread","amount":1,"icon":"./materials/bread.svg"}],"profession":{"name":"Cooking","level":46,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Prepare an Underwater Salad","output":"Underwater Salad","requirements":{"materials":[{"name":"Sea Cabbage","amount":1,"icon":"./materials/sea_cabbage.svg"},{"name":"Sea Spinach","amount":1,"icon":"./materials/sea_spinach.svg"},{"name":"Underwater Lotus","amount":1,"icon":"./materials/underwater_lotus.svg"}],"profession":{"name":"Cooking","level":46,"icon":"./professions/cooking.svg"},"service":"Basic Kitchen"}},{"name":"Fry  a Shark","output":"a Shark","requirements":{"materials":[{"name":"Raw Shark","amount":1,"icon":"./materials/raw_shark.svg"}],"profession":{"name":"Cooking","level":50,"icon":"./professions/cooking.svg"},"service":"Advanced Kitchen"}},{"name":"Fry  a Largemouth Bass","output":"a Largemouth Bass","requirements":{"materials":[{"name":"Raw Largemouth Bass","amount":1,"icon":"./materials/raw_largemouth_bass.svg"}],"profession":{"name":"Cooking","level":55,"icon":"./professions/cooking.svg"},"service":"Advanced Kitchen"}},{"name":"Fry  an Anglerfish","output":"an Anglerfish","requirements":{"materials":[{"name":"Raw Anglerfish","amount":1,"icon":"./materials/raw_anglerfish.svg"}],"profession":{"name":"Cooking","level":60,"icon":"./professions/cooking.svg"},"service":"Advanced Kitchen"}},{"name":"Make a Basic Hatchet","output":"Basic Hatchet","requirements":{"materials":[{"name":"Stone","amount":1,"icon":"./materials/stone.svg"},{"name":"Wooden Stick","amount":1,"icon":"./materials/wooden_stick.svg"}],"profession":{"name":"Crafting","level":1,"icon":"./professions/crafting.svg"}}},{"name":"Make a Basic Pickaxe","output":"Basic Pickaxe","requirements":{"materials":[{"name":"Stone","amount":1,"icon":"./materials/stone.svg"},{"name":"Wooden Stick","amount":1,"icon":"./materials/wooden_stick.svg"}],"profession":{"name":"Crafting","level":1,"icon":"./professions/crafting.svg"}}},{"name":"Make a Basic Sickle","output":"Basic Sickle","requirements":{"materials":[{"name":"Stone","amount":1,"icon":"./materials/stone.svg"},{"name":"Wooden Stick","amount":1,"icon":"./materials/wooden_stick.svg"},{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":1,"icon":"./professions/crafting.svg"}}},{"name":"Spin Flax into Twine","output":"Twine","requirements":{"materials":[{"name":"Flax","amount":1,"icon":"./materials/flax.svg"}],"profession":{"name":"Crafting","level":1,"icon":"./professions/crafting.svg"}}},{"name":"Craft a Copper Hatchet","output":"Copper Hatchet","requirements":{"materials":[{"name":"Copper Bar","amount":1,"icon":"./materials/copper_bar.svg"},{"name":"Birch Plank","amount":1,"icon":"./materials/birch_plank.svg"}],"profession":{"name":"Crafting","level":2,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Copper Pickaxe","output":"Copper Pickaxe","requirements":{"materials":[{"name":"Copper Bar","amount":1,"icon":"./materials/copper_bar.svg"},{"name":"Birch Plank","amount":1,"icon":"./materials/birch_plank.svg"}],"profession":{"name":"Crafting","level":2,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Make a Copper Sickle","output":"Copper Sickle","requirements":{"materials":[{"name":"Copper Bar","amount":1,"icon":"./materials/copper_bar.svg"},{"name":"Birch Plank","amount":1,"icon":"./materials/birch_plank.svg"},{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":2,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Weave a Basic Fishing Net","output":"Basic Fishing Net","requirements":{"materials":[{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":2,"icon":"./professions/crafting.svg"}}},{"name":"Craft a Basic  Fishing Rod","output":"Fishing","requirements":{"materials":[{"name":"Wooden Stick","amount":1,"icon":"./materials/wooden_stick.svg"},{"name":"Fishing Line","amount":1,"icon":"./materials/fishing_line.svg"}],"profession":{"name":"Crafting","level":4,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Bag of Rocks","output":"Bag of Rocks","requirements":{"materials":[{"name":"Sturdy Branch","amount":1,"icon":"./materials/sturdy_branch.svg"},{"name":"Large Stone","amount":1,"icon":"./materials/large_stone.svg"}],"profession":{"name":"Crafting","level":5,"icon":"./professions/crafting.svg"}}},{"name":"Craft a Bronze Hatchet","output":"Bronze Hatchet","requirements":{"materials":[{"name":"Bronze Bar","amount":1,"icon":"./materials/bronze_bar.svg"},{"name":"Pine Plank","amount":1,"icon":"./materials/pine_plank.svg"}],"profession":{"name":"Crafting","level":10,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Bronze Pickaxe","output":"Bronze Pickaxe","requirements":{"materials":[{"name":"Bronze Bar","amount":1,"icon":"./materials/bronze_bar.svg"},{"name":"Pine Plank","amount":1,"icon":"./materials/pine_plank.svg"}],"profession":{"name":"Crafting","level":10,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Pine Fishing Rod","output":"Pine Fishing Rod","requirements":{"materials":[{"name":"Pine Plank","amount":1,"icon":"./materials/pine_plank.svg"},{"name":"Fishing Line","amount":1,"icon":"./materials/fishing_line.svg"}],"profession":{"name":"Crafting","level":10,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Upcycle Trash","output":"Upcycle Trash","requirements":{"materials":[{"name":"Trash","amount":1,"icon":"./materials/trash.svg"}],"profession":{"name":"Crafting","level":10,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Wanderlust Walking Stick","output":"Wanderlust Walking Stick","requirements":{"materials":[{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"},{"name":"Walking Stick","amount":1,"icon":"./materials/walking_stick.svg"}],"profession":{"name":"Crafting","level":12,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Weave a Large Fishing Net","output":"Large Fishing Net","requirements":{"materials":[{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":15,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft an Iron Hatchet","output":"Iron Hatchet","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"},{"name":"Spruce Plank","amount":1,"icon":"./materials/spruce_plank.svg"}],"profession":{"name":"Crafting","level":20,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft an Iron Pickaxe","output":"Iron Pickaxe","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"},{"name":"Spruce Plank","amount":1,"icon":"./materials/spruce_plank.svg"}],"profession":{"name":"Crafting","level":20,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft an Iron Sickle","output":"Iron Sickle","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"},{"name":"Spruce Plank","amount":1,"icon":"./materials/spruce_plank.svg"},{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":20,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Fishing Spear","output":"Fishing Spear","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"},{"name":"Maple Plank","amount":1,"icon":"./materials/maple_plank.svg"}],"profession":{"name":"Crafting","level":25,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Kelp Diving Mask","output":"Kelp Diving Mask","requirements":{"materials":[{"name":"Hardened Kelp","amount":1,"icon":"./materials/hardened_kelp.svg"}],"profession":{"name":"Crafting","level":25,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Kelp Diving Pants","output":"Kelp Diving Pants","requirements":{"materials":[{"name":"Hardened Kelp","amount":1,"icon":"./materials/hardened_kelp.svg"}],"profession":{"name":"Crafting","level":25,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Kelp Diving Shirt","output":"Kelp Diving Shirt","requirements":{"materials":[{"name":"Hardened Kelp","amount":1,"icon":"./materials/hardened_kelp.svg"}],"profession":{"name":"Crafting","level":25,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Steel Hatchet","output":"Steel Hatchet","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"},{"name":"Maple Plank","amount":1,"icon":"./materials/maple_plank.svg"}],"profession":{"name":"Crafting","level":30,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Steel Pickaxe","output":"Steel Pickaxe","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"},{"name":"Maple Plank","amount":1,"icon":"./materials/maple_plank.svg"}],"profession":{"name":"Crafting","level":30,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Steel Sickle","output":"Steel Sickle","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"},{"name":"Maple Plank","amount":1,"icon":"./materials/maple_plank.svg"},{"name":"Twine","amount":1,"icon":"./materials/twine.svg"}],"profession":{"name":"Crafting","level":30,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft an Oak Fishing Rod","output":"Oak Fishing Rod","requirements":{"materials":[{"name":"Oak Plank","amount":1,"icon":"./materials/oak_plank.svg"},{"name":"Fishing Line","amount":1,"icon":"./materials/fishing_line.svg"}],"profession":{"name":"Crafting","level":30,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Lobster Pot","output":"Lobster Pot","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"},{"name":"Teak Plank","amount":1,"icon":"./materials/teak_plank.svg"}],"profession":{"name":"Crafting","level":35,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft Kelp Twine","output":"Kelp Twine","requirements":{"materials":[{"name":"Hardened Kelp","amount":1,"icon":"./materials/hardened_kelp.svg"}],"profession":{"name":"Crafting","level":37,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft Reinforced Bellows","output":"Reinforced Bellows","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"},{"name":"Forge Bellows","amount":1,"icon":"./materials/forge_bellows.svg"}],"profession":{"name":"Crafting","level":37,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Jellyfishing Net","output":"Jellyfishing Net","requirements":{"materials":[{"name":"Kelp Twine","amount":1,"icon":"./materials/kelp_twine.svg"},{"name":"Sturdy Branch","amount":1,"icon":"./materials/sturdy_branch.svg"}],"profession":{"name":"Crafting","level":37,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Tarsilium Hatchet","output":"Tarsilium Hatchet","requirements":{"materials":[{"name":"Tarsilium Bar","amount":1,"icon":"./materials/tarsilium_bar.svg"},{"name":"Teak Plank","amount":1,"icon":"./materials/teak_plank.svg"}],"profession":{"name":"Crafting","level":40,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Tarsilium Pickaxe","output":"Tarsilium Pickaxe","requirements":{"materials":[{"name":"Tarsilium Bar","amount":1,"icon":"./materials/tarsilium_bar.svg"},{"name":"Teak Plank","amount":1,"icon":"./materials/teak_plank.svg"}],"profession":{"name":"Crafting","level":40,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Willow Fishing Rod","output":"Willow Fishing Rod","requirements":{"materials":[{"name":"Willow Plank","amount":1,"icon":"./materials/willow_plank.svg"},{"name":"Fishing Line","amount":1,"icon":"./materials/fishing_line.svg"}],"profession":{"name":"Crafting","level":40,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft Hydrilium","output":"Hydrilium","requirements":{"materials":[{"name":"Hardened Kelp","amount":1,"icon":"./materials/hardened_kelp.svg"},{"name":"Volcanic Rock","amount":1,"icon":"./materials/volcanic_rock.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Coral Fishing Spear","output":"Coral Fishing Spear","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Coral Plank","amount":1,"icon":"./materials/coral_plank.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Diving Helm","output":"Hydrilium Diving Helm","requirements":{"materials":[{"name":"Hydrilium","amount":1,"icon":"./materials/hydrilium.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Diving Leggings","output":"Hydrilium Diving Leggings","requirements":{"materials":[{"name":"Hydrilium","amount":1,"icon":"./materials/hydrilium.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Diving Torso","output":"Hydrilium Diving Torso","requirements":{"materials":[{"name":"Hydrilium","amount":1,"icon":"./materials/hydrilium.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Hatchet","output":"Hydrilium Hatchet","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Coral Plank","amount":1,"icon":"./materials/coral_plank.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Pickaxe","output":"Hydrilium Pickaxe","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Coral Plank","amount":1,"icon":"./materials/coral_plank.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Hydrilium Sickle","output":"Hydrilium Sickle","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Coral Plank","amount":1,"icon":"./materials/coral_plank.svg"},{"name":"Kelp Twine","amount":1,"icon":"./materials/kelp_twine.svg"}],"profession":{"name":"Crafting","level":45,"icon":"./professions/crafting.svg"},"service":"Basic Workshop"}},{"name":"Craft a Farganite Hatchet","output":"Farganite Hatchet","requirements":{"materials":[{"name":"Farganite Bar","amount":1,"icon":"./materials/farganite_bar.svg"},{"name":"Mangrove Plank","amount":1,"icon":"./materials/mangrove_plank.svg"}],"profession":{"name":"Crafting","level":50,"icon":"./professions/crafting.svg"},"service":"Advanced Workshop"}},{"name":"Craft a Farganite Pickaxe","output":"Farganite Pickaxe","requirements":{"materials":[{"name":"Farganite Bar","amount":1,"icon":"./materials/farganite_bar.svg"},{"name":"Mangrove Plank","amount":1,"icon":"./materials/mangrove_plank.svg"}],"profession":{"name":"Crafting","level":50,"icon":"./professions/crafting.svg"},"service":"Advanced Workshop"}},{"name":"Craft a Hydrilium Log Splitter","output":"Hydrilium Log Splitter","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Log Splitter","amount":1,"icon":"./materials/log_splitter.svg"}],"profession":{"name":"Crafting","level":52,"icon":"./professions/crafting.svg"},"service":"Advanced Workshop"}},{"name":"Craft a Hydrilium Magnet","output":"Hydrilium Magnet","requirements":{"materials":[{"name":"Hydrilium Bar","amount":1,"icon":"./materials/hydrilium_bar.svg"},{"name":"Miner's Magnet","amount":1,"icon":"./materials/miner_s_magnet.svg"}],"profession":{"name":"Crafting","level":54,"icon":"./professions/crafting.svg"},"service":"Advanced Workshop"}},{"name":"Craft a Mangrove Basket","output":"Mangrove Basket","requirements":{"materials":[{"name":"Mangrove Plank","amount":1,"icon":"./materials/mangrove_plank.svg"},{"name":"Big Basket","amount":1,"icon":"./materials/big_basket.svg"},{"name":"Log Basket","amount":1,"icon":"./materials/log_basket.svg"}],"profession":{"name":"Crafting","level":55,"icon":"./professions/crafting.svg"},"service":"Advanced Workshop"}},{"name":"Create a Copper Bar (Scrap)","output":"Copper Bar","requirements":{"materials":[{"name":"Metal Scrap","amount":1,"icon":"./materials/metal_scrap.svg"}],"profession":{"name":"Smithing","level":1,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Copper Bar","output":"Copper Bar","requirements":{"materials":[{"name":"Copper Ore","amount":1,"icon":"./materials/copper_ore.svg"}],"profession":{"name":"Smithing","level":1,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Copper Shield","output":"Copper Shield","requirements":{"materials":[{"name":"Copper Bar","amount":1,"icon":"./materials/copper_bar.svg"}],"profession":{"name":"Smithing","level":3,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Silver Bar","output":"Silver Bar","requirements":{"materials":[{"name":"Silver Nugget","amount":1,"icon":"./materials/silver_nugget.svg"}],"profession":{"name":"Smithing","level":5,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Copper Sword","output":"Copper Sword","requirements":{"materials":[{"name":"Copper Bar","amount":1,"icon":"./materials/copper_bar.svg"}],"profession":{"name":"Smithing","level":6,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Create a Bronze Bar (Scrap)","output":"Bronze Bar","requirements":{"materials":[{"name":"Metal Scrap","amount":1,"icon":"./materials/metal_scrap.svg"}],"profession":{"name":"Smithing","level":10,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Bronze Bar","output":"Bronze Bar","requirements":{"materials":[{"name":"Copper Ore","amount":1,"icon":"./materials/copper_ore.svg"},{"name":"Tin Ore","amount":1,"icon":"./materials/tin_ore.svg"}],"profession":{"name":"Smithing","level":10,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Bronze Shield","output":"Bronze Shield","requirements":{"materials":[{"name":"Bronze Bar","amount":1,"icon":"./materials/bronze_bar.svg"}],"profession":{"name":"Smithing","level":13,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Gold Bar","output":"Gold Bar","requirements":{"materials":[{"name":"Gold Nugget","amount":1,"icon":"./materials/gold_nugget.svg"}],"profession":{"name":"Smithing","level":15,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Bronze Sword","output":"Bronze Sword","requirements":{"materials":[{"name":"Bronze Bar","amount":1,"icon":"./materials/bronze_bar.svg"}],"profession":{"name":"Smithing","level":16,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Create an Iron Bar (Scrap)","output":"Iron Bar","requirements":{"materials":[{"name":"Metal Scrap","amount":1,"icon":"./materials/metal_scrap.svg"}],"profession":{"name":"Smithing","level":20,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt an Iron Bar","output":"Iron Bar","requirements":{"materials":[{"name":"Iron Ore","amount":1,"icon":"./materials/iron_ore.svg"}],"profession":{"name":"Smithing","level":20,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make an Iron Shield","output":"Iron Shield","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"}],"profession":{"name":"Smithing","level":23,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make an Iron Sword","output":"Iron Sword","requirements":{"materials":[{"name":"Iron Bar","amount":1,"icon":"./materials/iron_bar.svg"}],"profession":{"name":"Smithing","level":26,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Create a Steel Bar (Scrap)","output":"Steel Bar","requirements":{"materials":[{"name":"Metal Scrap","amount":1,"icon":"./materials/metal_scrap.svg"}],"profession":{"name":"Smithing","level":30,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Steel Bar","output":"Steel Bar","requirements":{"materials":[{"name":"Iron Ore","amount":1,"icon":"./materials/iron_ore.svg"},{"name":"Coal","amount":1,"icon":"./materials/coal.svg"}],"profession":{"name":"Smithing","level":30,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Steel Shield","output":"Steel Shield","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"}],"profession":{"name":"Smithing","level":33,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Steel Sword","output":"Steel Sword","requirements":{"materials":[{"name":"Steel Bar","amount":1,"icon":"./materials/steel_bar.svg"}],"profession":{"name":"Smithing","level":36,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Create a Tarsilium Bar (Scrap)","output":"Tarsilium Bar","requirements":{"materials":[{"name":"Metal Scrap","amount":1,"icon":"./materials/metal_scrap.svg"}],"profession":{"name":"Smithing","level":40,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Tarsilium Bar","output":"Tarsilium Bar","requirements":{"materials":[{"name":"Tarsilium Ore","amount":1,"icon":"./materials/tarsilium_ore.svg"},{"name":"Coal","amount":1,"icon":"./materials/coal.svg"}],"profession":{"name":"Smithing","level":40,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make  Tarsilium-toed Boots","output":"Tarsilium-toed Boots","requirements":{"materials":[{"name":"Tarsilium Bar","amount":1,"icon":"./materials/tarsilium_bar.svg"},{"name":"Steel-Toe Boots","amount":1,"icon":"./materials/steel_toe_boots.svg"}],"profession":{"name":"Smithing","level":41,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Tarsilium Shield","output":"Tarsilium Shield","requirements":{"materials":[{"name":"Tarsilium Bar","amount":1,"icon":"./materials/tarsilium_bar.svg"}],"profession":{"name":"Smithing","level":43,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Hydrilium Bar","output":"Hydrilium Bar","requirements":{"materials":[{"name":"Kelp","amount":1,"icon":"./materials/kelp.svg"},{"name":"Hydrilium","amount":1,"icon":"./materials/hydrilium.svg"}],"profession":{"name":"Smithing","level":45,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Make a Tarsilium Sword","output":"Tarsilium Sword","requirements":{"materials":[{"name":"Tarsilium Bar","amount":1,"icon":"./materials/tarsilium_bar.svg"}],"profession":{"name":"Smithing","level":46,"icon":"./professions/smithing.svg"},"service":"Basic Forge"}},{"name":"Smelt a Farganite Bar","output":"Farganite Bar","requirements":{"materials":[{"name":"Farganite Ore","amount":1,"icon":"./materials/farganite_ore.svg"},{"name":"Coal","amount":1,"icon":"./materials/coal.svg"}],"profession":{"name":"Smithing","level":50,"icon":"./professions/smithing.svg"},"service":"Advanced Forge"}},{"name":"Make a Farganite Shield","output":"Farganite Shield","requirements":{"materials":[{"name":"Farganite Bar","amount":1,"icon":"./materials/farganite_bar.svg"}],"profession":{"name":"Smithing","level":53,"icon":"./professions/smithing.svg"},"service":"Advanced Forge"}},{"name":"Make a Farganite Sword","output":"Farganite Sword","requirements":{"materials":[{"name":"Farganite Bar","amount":1,"icon":"./materials/farganite_bar.svg"}],"profession":{"name":"Smithing","level":56,"icon":"./professions/smithing.svg"},"service":"Advanced Forge"}},{"name":"Make a Gem Shield","output":"Gem Shield","requirements":{"materials":[{"name":"Farganite Bar","amount":1,"icon":"./materials/farganite_bar.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Sun Stone","amount":1,"icon":"./materials/sun_stone.svg"},{"name":"Ruby","amount":1,"icon":"./materials/ruby.svg"},{"name":"Jade","amount":1,"icon":"./materials/jade.svg"},{"name":"Topaz","amount":1,"icon":"./materials/topaz.svg"},{"name":"Wrentmarine","amount":1,"icon":"./materials/wrentmarine.svg"}],"profession":{"name":"Smithing","level":59,"icon":"./professions/smithing.svg"},"service":"Advanced Forge"}},{"name":"Create a Jarvonian Flower Necklace","output":"Jarvonian Flower Necklace","requirements":{"materials":[{"name":"Moondaisy","amount":1,"icon":"./materials/moondaisy.svg"},{"name":"Snowdrop","amount":1,"icon":"./materials/snowdrop.svg"}],"profession":{"name":"Trinketry","level":1,"icon":"./professions/trinketry.svg"}}},{"name":"Shape an Opal","output":"Opal","requirements":{"materials":[{"name":"Rough Opal","amount":1,"icon":"./materials/rough_opal.svg"}],"profession":{"name":"Trinketry","level":1,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Ring","output":"Silver Ring","requirements":{"materials":[{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":5,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Star Pearl","output":"Star Pearl","requirements":{"materials":[{"name":"Rough Star Pearl","amount":1,"icon":"./materials/rough_star_pearl.svg"}],"profession":{"name":"Trinketry","level":8,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Opal Ring","output":"Silver Opal Ring","requirements":{"materials":[{"name":"Opal","amount":1,"icon":"./materials/opal.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":10,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Ring","output":"Gold Ring","requirements":{"materials":[{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":15,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Wrentmarine","output":"Wrentmarine","requirements":{"materials":[{"name":"Rough Wrentmarine","amount":1,"icon":"./materials/rough_wrentmarine.svg"}],"profession":{"name":"Trinketry","level":15,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Star Pearl Ring","output":"Silver Star Pearl Ring","requirements":{"materials":[{"name":"Star Pearl","amount":1,"icon":"./materials/star_pearl.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":17,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Opal Ring","output":"Gold Opal Ring","requirements":{"materials":[{"name":"Opal","amount":1,"icon":"./materials/opal.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":20,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Topaz","output":"Topaz","requirements":{"materials":[{"name":"Rough Topaz","amount":1,"icon":"./materials/rough_topaz.svg"}],"profession":{"name":"Trinketry","level":21,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Wrentmarine Ring","output":"Silver Wrentmarine Ring","requirements":{"materials":[{"name":"Wrentmarine","amount":1,"icon":"./materials/wrentmarine.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":24,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Jade","output":"Jade","requirements":{"materials":[{"name":"Rough Jade","amount":1,"icon":"./materials/rough_jade.svg"}],"profession":{"name":"Trinketry","level":26,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Star Pearl Ring","output":"Gold Star Pearl Ring","requirements":{"materials":[{"name":"Star Pearl","amount":1,"icon":"./materials/star_pearl.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":27,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Finding","output":"Amulet of Finding","requirements":{"materials":[{"name":"Compass Trinket","amount":1,"icon":"./materials/compass_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":27,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Topaz Ring","output":"Silver Topaz Ring","requirements":{"materials":[{"name":"Topaz","amount":1,"icon":"./materials/topaz.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":30,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Ruby","output":"Ruby","requirements":{"materials":[{"name":"Rough Ruby","amount":1,"icon":"./materials/rough_ruby.svg"}],"profession":{"name":"Trinketry","level":30,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Eel","output":"Amulet of Eel","requirements":{"materials":[{"name":"Eel Trinket","amount":1,"icon":"./materials/eel_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":31,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Heron","output":"Amulet of Heron","requirements":{"materials":[{"name":"Heron Trinket","amount":1,"icon":"./materials/heron_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":33,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Wrentmarine Ring","output":"Gold Wrentmarine Ring","requirements":{"materials":[{"name":"Wrentmarine","amount":1,"icon":"./materials/wrentmarine.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":34,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape a Sun Stone","output":"Sun Stone","requirements":{"materials":[{"name":"Rough Sun Stone","amount":1,"icon":"./materials/rough_sun_stone.svg"}],"profession":{"name":"Trinketry","level":34,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Jade Ring","output":"Silver Jade Ring","requirements":{"materials":[{"name":"Jade","amount":1,"icon":"./materials/jade.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":35,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Bat","output":"Amulet of Bat","requirements":{"materials":[{"name":"Bat Trinket","amount":1,"icon":"./materials/bat_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":35,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Cooling Ice","output":"Amulet of Cooling Ice","requirements":{"materials":[{"name":"Cooling Icicle Trinket","amount":1,"icon":"./materials/cooling_icicle_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":37,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Shape an Ethernite","output":"Ethernite","requirements":{"materials":[{"name":"Rough Ethernite","amount":1,"icon":"./materials/rough_ethernite.svg"}],"profession":{"name":"Trinketry","level":38,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Ruby Ring","output":"Silver Ruby Ring","requirements":{"materials":[{"name":"Ruby","amount":1,"icon":"./materials/ruby.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":39,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Topaz Ring","output":"Gold Topaz Ring","requirements":{"materials":[{"name":"Topaz","amount":1,"icon":"./materials/topaz.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":40,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an  Amulet of Root","output":"Amulet of Root","requirements":{"materials":[{"name":"Circular Root Trinket","amount":1,"icon":"./materials/circular_root_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":41,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Pink Pearl","output":"Amulet of Pink Pearl","requirements":{"materials":[{"name":"Pink Pearl Trinket","amount":1,"icon":"./materials/pink_pearl_trinket.svg"},{"name":"Pearls","amount":1,"icon":"./materials/pearls.svg"}],"profession":{"name":"Trinketry","level":42,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Sun Stone Ring","output":"Silver Sun Stone Ring","requirements":{"materials":[{"name":"Sun Stone","amount":1,"icon":"./materials/sun_stone.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":43,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Measuring Spoons","output":"Amulet of Measuring Spoons","requirements":{"materials":[{"name":"Measuring Spoons Trinket","amount":1,"icon":"./materials/measuring_spoons_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":43,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Jade Ring","output":"Gold Jade Ring","requirements":{"materials":[{"name":"Jade","amount":1,"icon":"./materials/jade.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":45,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Shrimp","output":"Amulet of Shrimp","requirements":{"materials":[{"name":"Shrimp Trinket","amount":1,"icon":"./materials/shrimp_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":45,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Silver Ethernite Ring","output":"Silver Ethernite Ring","requirements":{"materials":[{"name":"Ethernite","amount":1,"icon":"./materials/ethernite.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":47,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create a Gold Ruby Ring","output":"Gold Ruby Ring","requirements":{"materials":[{"name":"Ruby","amount":1,"icon":"./materials/ruby.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":49,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Beaver","output":"Amulet of Beaver","requirements":{"materials":[{"name":"Beaver Trinket","amount":1,"icon":"./materials/beaver_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":49,"icon":"./professions/trinketry.svg"},"service":"Basic Trinketry Bench"}},{"name":"Create an Amulet of Lucky Rabbit's Foot","output":"Amulet of Lucky Rabbit's Foot","requirements":{"materials":[{"name":"Lucky Rabbit Foot Trinket","amount":1,"icon":"./materials/lucky_rabbit_foot_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"}],"profession":{"name":"Trinketry","level":51,"icon":"./professions/trinketry.svg"},"service":"Advanced Trinketry Bench"}},{"name":"Create a Gold Sun Stone Ring","output":"Gold Sun Stone Ring","requirements":{"materials":[{"name":"Sun Stone","amount":1,"icon":"./materials/sun_stone.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":53,"icon":"./professions/trinketry.svg"},"service":"Advanced Trinketry Bench"}},{"name":"Create  an Amulet of Animal Kingdom","output":"an Amulet of Animal Kingdom","requirements":{"materials":[{"name":"Beaver Trinket","amount":1,"icon":"./materials/beaver_trinket.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"},{"name":"Silver Bar","amount":1,"icon":"./materials/silver_bar.svg"},{"name":"Heron Trinket","amount":1,"icon":"./materials/heron_trinket.svg"},{"name":"Shrimp Trinket","amount":1,"icon":"./materials/shrimp_trinket.svg"},{"name":"Eel Trinket","amount":1,"icon":"./materials/eel_trinket.svg"},{"name":"Bat Trinket","amount":1,"icon":"./materials/bat_trinket.svg"},{"name":"Shark Tooth Trinket","amount":1,"icon":"./materials/shark_tooth_trinket.svg"},{"name":"Lucky Rabbit Foot Trinket","amount":1,"icon":"./materials/lucky_rabbit_foot_trinket.svg"}],"profession":{"name":"Trinketry","level":55,"icon":"./professions/trinketry.svg"},"service":"Advanced Trinketry Bench"}},{"name":"Create a Gold Ethernite Ring","output":"Gold Ethernite Ring","requirements":{"materials":[{"name":"Ethernite","amount":1,"icon":"./materials/ethernite.svg"},{"name":"Gold Bar","amount":1,"icon":"./materials/gold_bar.svg"}],"profession":{"name":"Trinketry","level":57,"icon":"./professions/trinketry.svg"},"service":"Advanced Trinketry Bench"}}]`),wo=JSON.parse(`{"Birch Plank":"./materials/birch_plank.svg","Oak Plank":"./materials/oak_plank.svg","Maple Plank":"./materials/maple_plank.svg","Wooden Shield":"./materials/wooden_shield.svg","Teak Plank":"./materials/teak_plank.svg","Willow Plank":"./materials/willow_plank.svg","Pine Plank":"./materials/pine_plank.svg","Wooden Sword":"./materials/wooden_sword.svg","Spruce Plank":"./materials/spruce_plank.svg","Coral Plank":"./materials/coral_plank.svg","Bamboo Plank":"./materials/bamboo_plank.svg","Perch":"./materials/perch.svg","Chocolate Milk":"./materials/chocolate_milk.svg","Milk":"./materials/milk.svg","Mangrove Plank":"./materials/mangrove_plank.svg","Bagel":"./materials/bagel.svg","Pickles":"./materials/pickles.svg","Shrimp":"./materials/shrimp.svg","a Carp":"./materials/a_carp.svg","Nettle Tea":"./materials/nettle_tea.svg","Bread":"./materials/bread.svg","Jellyfish":"./materials/jellyfish.svg","a Salmon":"./materials/a_salmon.svg","Pike":"./materials/pike.svg","Mushroom Curry":"./materials/mushroom_curry.svg","Mud Pie":"./materials/mud_pie.svg","Trout Soup":"./materials/trout_soup.svg","Basic Sickle":"./materials/basic_sickle.svg","Porridge":"./materials/porridge.svg","Copper Pickaxe":"./materials/copper_pickaxe.svg","Pancakes":"./materials/pancakes.svg","Copper Hatchet":"./materials/copper_hatchet.svg","Trout":"./materials/trout.svg","Salmon Pie":"./materials/salmon_pie.svg","Lobster":"./materials/lobster.svg","Kelp Roll":"./materials/kelp_roll.svg","Twine":"./materials/twine.svg","Harden Kelp":"./materials/harden_kelp.svg","Wanderlust Walking Stick":"./materials/wanderlust_walking_stick.svg","a Largemouth Bass":"./materials/a_largemouth_bass.svg","Underwater Salad":"./materials/underwater_salad.svg","a Shark":"./materials/a_shark.svg","Iron Pickaxe":"./materials/iron_pickaxe.svg","Iron Hatchet":"./materials/iron_hatchet.svg","an Anglerfish":"./materials/an_anglerfish.svg","Basic Hatchet":"./materials/basic_hatchet.svg","Basic Pickaxe":"./materials/basic_pickaxe.svg","Fishing":"./materials/fishing.svg","Oak Fishing Rod":"./materials/oak_fishing_rod.svg","Copper Sickle":"./materials/copper_sickle.svg","Basic Fishing Net":"./materials/basic_fishing_net.svg","Reinforced Bellows":"./materials/reinforced_bellows.svg","Dynamite":"./materials/dynamite.svg","Bag of Rocks":"./materials/bag_of_rocks.svg","Roasted Bell Pepper":"./materials/roasted_bell_pepper.svg","Saltrum":"./materials/saltrum.svg","Farganite Pickaxe":"./materials/farganite_pickaxe.svg","Farganite Hatchet":"./materials/farganite_hatchet.svg","a Stingray":"./materials/a_stingray.svg","Iron Sickle":"./materials/iron_sickle.svg","Sweet Carrot Pie":"./materials/sweet_carrot_pie.svg","Fishing Spear":"./materials/fishing_spear.svg","Kelp Diving Pants":"./materials/kelp_diving_pants.svg","Hydrilium Log Splitter":"./materials/hydrilium_log_splitter.svg","Kelp Diving Shirt":"./materials/kelp_diving_shirt.svg","Swordfish":"./materials/swordfish.svg","Steel Hatchet":"./materials/steel_hatchet.svg","Hydrilium Magnet":"./materials/hydrilium_magnet.svg","Steel Pickaxe":"./materials/steel_pickaxe.svg","Kelp Diving Mask":"./materials/kelp_diving_mask.svg","Bronze Pickaxe":"./materials/bronze_pickaxe.svg","Steel Sickle":"./materials/steel_sickle.svg","Hydrilium":"./materials/hydrilium.svg","Pine Fishing Rod":"./materials/pine_fishing_rod.svg","Hydrilium Diving Helm":"./materials/hydrilium_diving_helm.svg","Coral Fishing Spear":"./materials/coral_fishing_spear.svg","Bronze Hatchet":"./materials/bronze_hatchet.svg","Upcycle Trash":"./materials/upcycle_trash.svg","Hydrilium Hatchet":"./materials/hydrilium_hatchet.svg","Hydrilium Pickaxe":"./materials/hydrilium_pickaxe.svg","Hydrilium Sickle":"./materials/hydrilium_sickle.svg","Steel Bar":"./materials/steel_bar.svg","Steel Shield":"./materials/steel_shield.svg","Silver Bar":"./materials/silver_bar.svg","Steel Sword":"./materials/steel_sword.svg","Jellyfishing Net":"./materials/jellyfishing_net.svg","Tarsilium Hatchet":"./materials/tarsilium_hatchet.svg","Tarsilium Pickaxe":"./materials/tarsilium_pickaxe.svg","Bronze Bar":"./materials/bronze_bar.svg","Willow Fishing Rod":"./materials/willow_fishing_rod.svg","Tarsilium Bar":"./materials/tarsilium_bar.svg","Fried Fish Sandwich":"./materials/fried_fish_sandwich.svg","Large Fishing Net":"./materials/large_fishing_net.svg","Jelly Sandwich":"./materials/jelly_sandwich.svg","Kelp Twine":"./materials/kelp_twine.svg","Squid":"./materials/squid.svg","Lobster Pot":"./materials/lobster_pot.svg","Hydrilium Diving Leggings":"./materials/hydrilium_diving_leggings.svg","Hydrilium Diving Torso":"./materials/hydrilium_diving_torso.svg","Copper Bar":"./materials/copper_bar.svg","Copper Sword":"./materials/copper_sword.svg","Jade":"./materials/jade.svg","Bronze Sword":"./materials/bronze_sword.svg","Bronze Shield":"./materials/bronze_shield.svg","Gold Opal Ring":"./materials/gold_opal_ring.svg","Gold Bar":"./materials/gold_bar.svg","Iron Bar":"./materials/iron_bar.svg","Amulet of Finding":"./materials/amulet_of_finding.svg","Copper Shield":"./materials/copper_shield.svg","Silver Star Pearl Ring":"./materials/silver_star_pearl_ring.svg","Silver Wrentmarine Ring":"./materials/silver_wrentmarine_ring.svg","Silver Topaz Ring":"./materials/silver_topaz_ring.svg","Gold Star Pearl Ring":"./materials/gold_star_pearl_ring.svg","Topaz":"./materials/topaz.svg","Amulet of Beaver":"./materials/amulet_of_beaver.svg","Gold Sun Stone Ring":"./materials/gold_sun_stone_ring.svg","an Amulet of Animal Kingdom":"./materials/an_amulet_of_animal_kingdom.svg","Amulet of Lucky Rabbit's Foot":"./materials/amulet_of_lucky_rabbit_s_foot.svg","Iron Shield":"./materials/iron_shield.svg","Iron Sword":"./materials/iron_sword.svg","Tarsilium Shield":"./materials/tarsilium_shield.svg","Tarsilium-toed Boots":"./materials/tarsilium_toed_boots.svg","Hydrilium Bar":"./materials/hydrilium_bar.svg","Wood Scrap":"./materials/wood_scrap.svg","Jarvonian Flower Necklace":"./materials/jarvonian_flower_necklace.svg","Star Pearl":"./materials/star_pearl.svg","Opal":"./materials/opal.svg","Wrentmarine":"./materials/wrentmarine.svg","Amulet of Root":"./materials/amulet_of_root.svg","Gold Wrentmarine Ring":"./materials/gold_wrentmarine_ring.svg","Amulet of Heron":"./materials/amulet_of_heron.svg","Silver Opal Ring":"./materials/silver_opal_ring.svg","Amulet of Bat":"./materials/amulet_of_bat.svg","Gem Shield":"./materials/gem_shield.svg","Amulet of Eel":"./materials/amulet_of_eel.svg","Sun Stone":"./materials/sun_stone.svg","Amulet of Measuring Spoons":"./materials/amulet_of_measuring_spoons.svg","Gold Ring":"./materials/gold_ring.svg","Gold Ethernite Ring":"./materials/gold_ethernite_ring.svg","Amulet of Cooling Ice":"./materials/amulet_of_cooling_ice.svg","Silver Jade Ring":"./materials/silver_jade_ring.svg","Ruby":"./materials/ruby.svg","Silver Sun Stone Ring":"./materials/silver_sun_stone_ring.svg","Farganite Shield":"./materials/farganite_shield.svg","Amulet of Pink Pearl":"./materials/amulet_of_pink_pearl.svg","Ethernite":"./materials/ethernite.svg","Amulet of Shrimp":"./materials/amulet_of_shrimp.svg","Farganite Bar":"./materials/farganite_bar.svg","Gold Ruby Ring":"./materials/gold_ruby_ring.svg","Gold Topaz Ring":"./materials/gold_topaz_ring.svg","Silver Ring":"./materials/silver_ring.svg","Gold Jade Ring":"./materials/gold_jade_ring.svg","Silver Ruby Ring":"./materials/silver_ruby_ring.svg","Silver Ethernite Ring":"./materials/silver_ethernite_ring.svg","Farganite Sword":"./materials/farganite_sword.svg","Tarsilium Sword":"./materials/tarsilium_sword.svg","Mangrove Basket":"./materials/mangrove_basket.svg","Maple Logs":"./materials/maple_logs.svg","Oak Logs":"./materials/oak_logs.svg","Teak Logs":"./materials/teak_logs.svg","Coral":"./materials/coral.svg","Milkweed":"./materials/milkweed.svg","Bamboo Logs":"./materials/bamboo_logs.svg","Raw Perch":"./materials/raw_perch.svg","Raw Carp":"./materials/raw_carp.svg","Wheat":"./materials/wheat.svg","Chocolate":"./materials/chocolate.svg","Raw Jellyfish":"./materials/raw_jellyfish.svg","Cucumber":"./materials/cucumber.svg","Raw Salmon":"./materials/raw_salmon.svg","Raw Shrimp":"./materials/raw_shrimp.svg","Stone":"./materials/stone.svg","Mushroom":"./materials/mushroom.svg","Raw Pike":"./materials/raw_pike.svg","Raw Trout":"./materials/raw_trout.svg","Mud":"./materials/mud.svg","Birch Logs":"./materials/birch_logs.svg","Pine Logs":"./materials/pine_logs.svg","Willow Logs":"./materials/willow_logs.svg","Spruce Logs":"./materials/spruce_logs.svg","Mangrove Logs":"./materials/mangrove_logs.svg","Nettle":"./materials/nettle.svg","Raw Largemouth Bass":"./materials/raw_largemouth_bass.svg","Raw Shark":"./materials/raw_shark.svg","Raw Anglerfish":"./materials/raw_anglerfish.svg","Wooden Stick":"./materials/wooden_stick.svg","Bell Pepper":"./materials/bell_pepper.svg","Salt Crystal":"./materials/salt_crystal.svg","Sturdy Branch":"./materials/sturdy_branch.svg","Salty Hops":"./materials/salty_hops.svg","Sea Cabbage":"./materials/sea_cabbage.svg","Sweet Kelp":"./materials/sweet_kelp.svg","Flax":"./materials/flax.svg","Kelp":"./materials/kelp.svg","Silver Nugget":"./materials/silver_nugget.svg","Iron Ore":"./materials/iron_ore.svg","Raw Stingray":"./materials/raw_stingray.svg","Carrot":"./materials/carrot.svg","Raw Swordfish":"./materials/raw_swordfish.svg","Copper Ore":"./materials/copper_ore.svg","Trash":"./materials/trash.svg","Rough Jade":"./materials/rough_jade.svg","Gold Nugget":"./materials/gold_nugget.svg","Compass Trinket":"./materials/compass_trinket.svg","Beaver Trinket":"./materials/beaver_trinket.svg","Tarsilium Ore":"./materials/tarsilium_ore.svg","Lucky Rabbit Foot Trinket":"./materials/lucky_rabbit_foot_trinket.svg","Rough Topaz":"./materials/rough_topaz.svg","Rough Wrentmarine":"./materials/rough_wrentmarine.svg","Rough Star Pearl":"./materials/rough_star_pearl.svg","Rough Opal":"./materials/rough_opal.svg","Moondaisy":"./materials/moondaisy.svg","Raw Lobster":"./materials/raw_lobster.svg","Hardened Kelp":"./materials/hardened_kelp.svg","Metal Scrap":"./materials/metal_scrap.svg","Rough Sun Stone":"./materials/rough_sun_stone.svg","Circular Root Trinket":"./materials/circular_root_trinket.svg","Heron Trinket":"./materials/heron_trinket.svg","Eel Trinket":"./materials/eel_trinket.svg","Measuring Spoons Trinket":"./materials/measuring_spoons_trinket.svg","Rough Ethernite":"./materials/rough_ethernite.svg","Pink Pearl Trinket":"./materials/pink_pearl_trinket.svg","Bat Trinket":"./materials/bat_trinket.svg","Cooling Icicle Trinket":"./materials/cooling_icicle_trinket.svg","Rough Ruby":"./materials/rough_ruby.svg","Shrimp Trinket":"./materials/shrimp_trinket.svg","Farganite Ore":"./materials/farganite_ore.svg","Berries":"./materials/berries.svg","Tomato":"./materials/tomato.svg","Raw Squid":"./materials/raw_squid.svg","Walking Stick":"./materials/walking_stick.svg","Forge Bellows":"./materials/forge_bellows.svg","Fishing Line":"./materials/fishing_line.svg","Pepper":"./materials/pepper.svg","Volcanic Ash":"./materials/volcanic_ash.svg","Large Stone":"./materials/large_stone.svg","Coal":"./materials/coal.svg","Log Splitter":"./materials/log_splitter.svg","Honeycomb":"./materials/honeycomb.svg","Sea Spinach":"./materials/sea_spinach.svg","Miner's Magnet":"./materials/miner_s_magnet.svg","Tin Ore":"./materials/tin_ore.svg","Snowdrop":"./materials/snowdrop.svg","Steel-Toe Boots":"./materials/steel_toe_boots.svg","Pearls":"./materials/pearls.svg","Volcanic Rock":"./materials/volcanic_rock.svg","Egg":"./materials/egg.svg","Big Basket":"./materials/big_basket.svg","Underwater Lotus":"./materials/underwater_lotus.svg","Potato":"./materials/potato.svg","Log Basket":"./materials/log_basket.svg","Shark Tooth Trinket":"./materials/shark_tooth_trinket.svg"}`),bo={Carpentry:"./professions/carpentry.svg",Cooking:"./professions/cooking.svg",Crafting:"./professions/crafting.svg",Smithing:"./professions/smithing.svg",Trinketry:"./professions/trinketry.svg",Fishing:"./professions/fishing.svg",Foraging:"./professions/foraging.svg",Mining:"./professions/mining.svg",Woodcutting:"./professions/woodcutting.svg",Agility:"./professions/agility.svg"},To={materials:wo,professions:bo},x={INVENTORY_PANEL_WIDTH:300,CONTAINER_PADDING:20,RECIPE_CARD_WIDTH:380,RECIPE_CARD_HEIGHT:110,RECIPE_CARD_SPACING:130,PROFESSION_HEADER_WIDTH:280,PROFESSION_HEADER_HEIGHT:50,PROFESSION_ICON_SIZE:30,PROFESSION_ICON_MARGIN:10,OUTPUT_ICON_SIZE:40,OUTPUT_ICON_MARGIN:10,MATERIAL_ICON_SIZE:20,MATERIAL_ICON_SPACING:130,LEVEL_INDICATOR_WIDTH:40,LEVEL_INDICATOR_HEIGHT:20,LEVEL_INDICATOR_X:350,LEVEL_INDICATOR_Y:5,MIN_SCALE:.5,MAX_SCALE:5,SCALE_FACTOR:1.1,PROFESSION_COLUMNS:3,COLUMN_WIDTH:400,ROW_HEIGHT:600,COLUMN_SPACING:10,DIALOG_MAX_WIDTH:500,DIALOG_PADDING:24,DIALOG_Z_INDEX:1e3,TEXTAREA_HEIGHT:200,BUTTON_PADDING_SMALL:"6px 12px",BUTTON_PADDING_NORMAL:"8px 16px",BUTTON_BORDER_RADIUS:4,BUTTON_FONT_SIZE_SMALL:12,BUTTON_FONT_SIZE_NORMAL:14},F={PROFESSION_HEADER:"lightblue",BORDER_CRAFTABLE:"#4CAF50",BORDER_MISSING_LEVEL:"#FF9800",BORDER_DEFAULT:"black",BORDER_WIDTH_CRAFTABLE:3,BORDER_WIDTH_DEFAULT:1,RECIPE_CARD_BACKGROUND:"lightgrey",LEVEL_INDICATOR_BACKGROUND:"orange",LEVEL_INDICATOR_TEXT:"white",CRAFTING_NORMAL:"#4CAF50",CRAFTING_FINE:"#2196F3",CRAFTING_NO_MATERIALS:"#F44336",CRAFTING_MISSING_LEVEL:"#FF9800",CRAFTING_CURRENT_LEVEL:"#9C27B0",AVAILABILITY_CAN_CRAFT:"#4CAF50",AVAILABILITY_CAN_CRAFT_FINE:"#2196F3",AVAILABILITY_CANNOT_CRAFT:"#F44336",BUTTON_IMPORT:"#4CAF50",BUTTON_IMPORT_HOVER:"#45a049",BUTTON_RESET:"#f44336",BUTTON_RESET_HOVER:"#da190b",BUTTON_CANCEL:"#f5f5f5",BUTTON_CANCEL_HOVER:"#e0e0e0",DIALOG_OVERLAY:"rgba(0, 0, 0, 0.5)",DIALOG_BACKGROUND:"white",DIALOG_ERROR_BACKGROUND:"#ffebee",DIALOG_ERROR_TEXT:"#c62828",TEXT_PRIMARY:"#333",TEXT_SECONDARY:"#666",TEXT_WHITE:"white",PLACEHOLDER_BACKGROUND:"#4a90e2",TOGGLE_BACKGROUND:"#ccc",TOGGLE_ACTIVE:"#4CAF50",TOGGLE_CONTAINER:"#f8f9fa",TOGGLE_BORDER:"#e0e0e0"},X={PROFESSION_HEADER:18,RECIPE_NAME:12,RECIPE_OUTPUT:10,CRAFTING_STATUS:9,MATERIAL_NAME:7,MATERIAL_AMOUNT:7,MATERIAL_AVAILABILITY:6,LEVEL_INDICATOR:10,DIALOG_TITLE:20,DIALOG_TEXT:14,TEXTAREA:12,ERROR_MESSAGE:14,PANEL_TITLE:18,TOGGLE_TEXT:14},L={RECIPE_INFO_X:60,RECIPE_INFO_Y:5,RECIPE_NAME_Y:0,RECIPE_AMOUNT_Y:15,CRAFTING_TIMES_Y:30,CRAFTING_STATUS_X_LEFT:0,CRAFTING_STATUS_X_RIGHT:80,MATERIALS_Y:50,MATERIAL_Y_OFFSET:10,MATERIAL_TEXT_Y:22,MATERIAL_AMOUNT_Y:30,MATERIAL_AVAILABILITY_Y:37,PROFESSION_TEXT_X:45,PROFESSION_TEXT_Y:15,LEVEL_TEXT_X:370,LEVEL_TEXT_Y:18,PLACEHOLDER_TEXT_X:25,PLACEHOLDER_TEXT_Y:28,DIALOG_MARGIN_BOTTOM:16,DIALOG_BUTTON_GAP:12,PANEL_MARGIN_BOTTOM:20,BUTTON_GAP:8,TOGGLE_MARGIN_BOTTOM:20,TOGGLE_PADDING:12},ia={CHARACTER:"walkscape-character"},Eo={1:0,2:83,3:174,4:276,5:388,6:512,7:650,8:801,9:969,10:1154,11:1358,12:1584,13:1833,14:2107,15:2411,16:2746,17:3115,18:3523,19:3973,20:4470,21:5018,22:5624,23:6291,24:7028,25:7842,26:8740,27:9730,28:10824,29:12031,30:13363,31:14833,32:16456,33:18247,34:20224,35:22406,36:24815,37:27473,38:30408,39:33648,40:37224,41:41171,42:45529,43:50339,44:55649,45:61512,46:67983,47:75127,48:83014,49:91721,50:101333,51:111945,52:123660,53:136594,54:150872,55:166636,56:184040,57:203254,58:224466,59:247886,60:273742,61:302288,62:333804,63:368599,64:407015,65:449428,66:496254,67:547953,68:605032,69:668051,70:737627,71:814445,72:899257,73:992895,74:1096278,75:1210421,76:1336443,77:1475581,78:1629200,79:1798808,80:1986068,81:2192818,82:2421087,83:2673114,84:2951373,85:3258594,86:3597792,87:3972294,88:4385776,89:4842295,90:5346332,91:5902831,92:6517253,93:7195629,94:7944614,95:8771558,96:9684577,97:10692629,98:11805606,99:13034431};var Ao=ke('<div class="item-icon-container svelte-1uha8ag"><canvas class="item-icon-canvas svelte-1uha8ag"></canvas></div>'),Ro=ke('<div class="quantity-normal svelte-1uha8ag"> </div>'),xo=ke('<div class="quantity-fine svelte-1uha8ag"> </div>'),Po=ke('<div><!> <div class="item-info svelte-1uha8ag"><div> </div> <div class="item-quantities svelte-1uha8ag"><!> <!></div></div></div>'),Bo=ke("<!> <!>",1),Io=ke("<!> <!> <!>",1),Oo=ke("<!> <!> <!> <!>",1),Lo=ke("<!> <!> <!> <!>",1),Go=ke("<!> <!> <!> <!> <!>",1),No=ke("<!> <!> <!> <!>",1),Fo=ke('<div class="error-message svelte-1uha8ag"> </div>'),Do=ke('<div class="dialog-overlay svelte-1uha8ag" role="button" tabindex="0" aria-label="Close dialog"><div class="dialog-content svelte-1uha8ag" role="dialog" aria-modal="true" aria-labelledby="import-dialog-title" tabindex="-1"><h3 id="import-dialog-title" class="svelte-1uha8ag">Importar Personaje</h3> <p class="svelte-1uha8ag">Pega el JSON de tu personaje de Walkscape:</p> <textarea class="import-textarea svelte-1uha8ag" placeholder="Pega aqui el JSON de tu personaje..."></textarea> <!> <div class="dialog-buttons svelte-1uha8ag"><button class="cancel-btn svelte-1uha8ag">Cancelar</button> <button class="import-confirm-btn svelte-1uha8ag">Importar</button></div></div></div>'),Mo=ke('<div class="container svelte-1uha8ag"><div class="inventory-panel svelte-1uha8ag"><div class="panel-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Inventario</h3> <div class="panel-buttons svelte-1uha8ag"><button class="import-btn svelte-1uha8ag">Importar Personaje</button> <button class="reset-btn svelte-1uha8ag">Restablecer</button></div></div> <div class="toggle-container svelte-1uha8ag"><label class="toggle-label svelte-1uha8ag"><input type="checkbox" class="toggle-input svelte-1uha8ag"/> <span class="toggle-slider svelte-1uha8ag"></span> <span class="toggle-text svelte-1uha8ag">Mostrar solo recetas posibles</span></label></div> <div class="inventory-grid svelte-1uha8ag"></div></div> <button class="recipe-canvas svelte-1uha8ag" aria-label="Recipe planning canvas"><!></button> <!></div>');function $o(a,e){lt(e,!1);const t=de(),i=de(),n=de(),s=de(),r=de();let o=de(tn),l=de(!1),h=de(""),u=de("");if(typeof window<"u"){const C=localStorage.getItem(ia.CHARACTER);if(C)try{te(o,JSON.parse(C))}catch(T){console.error("Error loading saved character:",T)}}function g(C){for(let T=99;T>=1;T--)if(C>=Eo[T])return T;return 1}let c=de(),k=de(1),f=de(),w=de({x:0,y:0}),v=!1,E={x:0,y:0},J={x:0,y:0},ee=de(!1);const B=de({}),D=To;async function se(C){return new Promise(T=>{const A=document.createElement("img");A.onload=()=>T(A),A.onerror=()=>T(null),A.src=C})}nn(()=>{const C=async()=>{for(const[H,Y]of Object.entries(D.materials)){const M=`/src/lib/assets/${Y.substring(2)}`,pe=await se(M);pe&&Ge(B,m(B)[Y]=pe)}},T=async()=>{for(const[H,Y]of Object.entries(D.professions)){const M=`/src/lib/assets/${Y.substring(2)}`,pe=await se(M);pe&&Ge(B,m(B)[Y]=pe)}},A=H=>{if(!v)return;const Y=H.clientX-E.x,M=H.clientY-E.y;Ge(w,m(w).x=J.x+Y),Ge(w,m(w).y=J.y+M)},W=()=>{v=!1};return window.addEventListener("mousemove",A),window.addEventListener("mouseup",W),C(),T(),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",W)}});function N(C){const T=m(o).skills[C]||0;return g(T)}function K(){te(u,"");try{const C=JSON.parse(m(h));if(!C.skills||typeof C.skills!="object"){te(u,"El JSON debe contener un objeto 'skills'");return}if(!C.inventory||typeof C.inventory!="object"){te(u,"El JSON debe contener un objeto 'inventory'");return}typeof window<"u"&&localStorage.setItem(ia.CHARACTER,JSON.stringify(C)),te(o,C),te(l,!1),te(h,"")}catch{te(u,"JSON invlido. Por favor, verifica el formato.")}}function re(){te(o,tn),typeof window<"u"&&localStorage.removeItem(ia.CHARACTER)}function z(C){return C.endsWith("_fine")?`Fine ${C.slice(0,-5).split("_").map(W=>W.charAt(0).toUpperCase()+W.slice(1)).join(" ")}`:C.split("_").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" ")}function fe(C){return C.toLowerCase().replace(/\s+/g,"_")}function _e(C,T){const A=C.requirements.profession.level,W=C.requirements.profession.name.toLowerCase(),H=N(W);if(!(H>=A))return{normal:0,fine:0,canCraftNormal:!1,canCraftFine:!1,missingLevel:A-H};const M=Math.min(...C.requirements.materials.map(Ie=>{const Xe=fe(Ie.name),gt=T[Xe]||{normal:0};return Math.floor(gt.normal/Ie.amount)})),pe=Math.min(...C.requirements.materials.map(Ie=>{const Xe=fe(Ie.name),gt=T[Xe]||{fine:0};return Math.floor(gt.fine/Ie.amount)}));return{normal:M||0,fine:pe||0,canCraftNormal:M>0,canCraftFine:pe>0,missingLevel:0}}function Te(C){v=!0,E={x:C.clientX,y:C.clientY},J={x:m(w).x,y:m(w).y}}function ye(C){if(!m(c))return;const T=m(c).scaleX(),A=T*C;if(A<.5||A>5)return;const W=m(c).width()/2,H=m(c).height()/2,Y={x:(W-m(c).x())/T,y:(H-m(c).y())/T},M={x:W-Y.x*A,y:H-Y.y*A};m(c).scaleX(A),m(c).scaleY(A),m(c).x(M.x),m(c).y(M.y),m(c).batchDraw(),te(k,A)}function Se(C){if(!m(c))return;const T=10;switch(C.key){case"ArrowUp":C.preventDefault(),Ge(w,m(w).y+=T);break;case"ArrowDown":C.preventDefault(),Ge(w,m(w).y-=T);break;case"ArrowLeft":C.preventDefault(),Ge(w,m(w).x+=T);break;case"ArrowRight":C.preventDefault(),Ge(w,m(w).x-=T);break;case"+":case"=":C.preventDefault(),ye(1.1);break;case"-":case"_":C.preventDefault(),ye(.9);break}}function ue(C,T){const A=C.getContext("2d");A&&A.drawImage(T,0,0,30,30)}function Ce(C){if(!m(c))return;C.preventDefault();const T=x.SCALE_FACTOR,A=m(k),W=m(f).getBoundingClientRect(),H=C.clientX-W.left,Y=C.clientY-W.top,M=C.deltaY>0?A/T:A*T;if(M<x.MIN_SCALE||M>x.MAX_SCALE)return;const pe=M-A,Ie=-(H-m(w).x)*pe/A,Xe=-(Y-m(w).y)*pe/A;te(k,M),Ge(w,m(w).x+=Ie),Ge(w,m(w).y+=Xe)}Dt(()=>an,()=>{te(t,an.reduce((C,T)=>{const A=T.requirements.profession.name;return C[A]||(C[A]=[]),C[A].push(T),C},{}))}),Dt(()=>m(t),()=>{te(i,Object.keys(m(t)).reduce((C,T)=>(C[T]=m(t)[T].sort((A,W)=>{const H=A.requirements.profession.level-W.requirements.profession.level;return H!==0?H:A.name.localeCompare(W.name)}),C),{}))}),Dt(()=>m(i),()=>{te(n,Object.keys(m(i)).reduce((C,T,A)=>{const Y=A%5,M=Math.floor(A/5);return C[T]={x:10+Y*420,y:M*600},C},{}))}),Dt(()=>m(o),()=>{te(s,(()=>{const C={};return Object.entries(m(o).inventory).forEach(([T,A])=>{let W=T,H=0,Y=A;T.endsWith("_fine")&&(W=T.slice(0,-5),H=A,Y=0);const M=z(W);C[M]?(C[M].normalQuantity+=Y,C[M].fineQuantity+=H):C[M]={normalQuantity:Y,fineQuantity:H,icon:D.materials[M],hasFine:H>0}}),m(o).bank&&Object.entries(m(o).bank).forEach(([T,A])=>{let W=T,H=0,Y=A;T.endsWith("_fine")&&(W=T.slice(0,-5),H=A,Y=0);const M=z(W);C[M]?(C[M].normalQuantity+=Y,C[M].fineQuantity+=H):C[M]={normalQuantity:Y,fineQuantity:H,icon:D.materials[M],hasFine:H>0}}),Object.entries(C).map(([T,A])=>({name:T,...A})).sort((T,A)=>T.name.localeCompare(A.name))})())}),Dt(()=>(m(i),m(s),m(ee)),()=>{te(r,m(i)&&Object.keys(m(i)).reduce((C,T)=>(C[T]=m(i)[T].map(A=>{const W={};m(s).forEach(Y=>{const M=fe(Y.name);W[M]={normal:Y.normalQuantity,fine:Y.fineQuantity}});const H=_e(A,W);return{...A,craftingTimes:H,canCraft:H.normal>0||H.fine>0,inventoryMap:W}}).filter(A=>m(ee)?A.canCraft&&A.craftingTimes.missingLevel===0:!0),C),{}))}),ps(),Vn();var et=Ae(),Pi=he(et);{var Bi=C=>{var T=Mo(),A=ce(T),W=ce(A),H=U(ce(W),2),Y=ce(H),M=U(Y,2);ne(H),ne(W);var pe=U(W,2),Ie=ce(pe),Xe=ce(Ie);Cs(Xe),vs(4),ne(Ie),ne(pe);var gt=U(pe,2);mi(gt,5,()=>m(s),ui,(Re,V)=>{var Ue=Po();let ze;var dt=ce(Ue);{var ft=Ee=>{const we=ae(()=>(m(B),m(V),p(()=>m(B)[m(V).icon])));var Fe=Ae(),ii=he(Fe);{var Gi=Pt=>{var _t=Ao(),Bt=ce(_t);Ga(Bt,"width",30),Ga(Bt,"height",30),Es(Bt,(Oe,P)=>ue?.(Oe,P),()=>m(we)),ne(_t),Q(Pt,_t)};le(ii,Pt=>{m(we)&&Pt(Gi)})}Q(Ee,Fe)};le(dt,Ee=>{m(V),m(B),p(()=>m(V).icon&&m(B)[m(V).icon])&&Ee(ft)})}var it=U(dt,2),Ne=ce(it);let pt;var me=ce(Ne,!0);ne(Ne);var oe=U(Ne,2),vt=ce(oe);{var Ii=Ee=>{var we=Ro(),Fe=ce(we);ne(we),ci(()=>hi(Fe,`x${m(V),p(()=>m(V).normalQuantity)??""}`)),Q(Ee,we)};le(vt,Ee=>{m(V),p(()=>m(V).normalQuantity>0)&&Ee(Ii)})}var Oi=U(vt,2);{var Li=Ee=>{var we=xo(),Fe=ce(we);ne(we),ci(()=>hi(Fe,`x${m(V),p(()=>m(V).fineQuantity)??""} fine`)),Q(Ee,we)};le(Oi,Ee=>{m(V),p(()=>m(V).fineQuantity>0)&&Ee(Li)})}ne(oe),ne(it),ne(Ue),ci(()=>{ze=La(Ue,1,"inventory-item svelte-1uha8ag",null,ze,{"has-fine":m(V).hasFine}),pt=La(Ne,1,"item-name svelte-1uha8ag",null,pt,{"fine-name":m(V).hasFine}),hi(me,(m(V),p(()=>m(V).name)))}),Q(Re,Ue)}),ne(gt),ne(A);var tt=U(A,2),Fn=ce(tt);{let Re=ae(()=>(S(x),p(()=>window.innerWidth-x.INVENTORY_PANEL_WIDTH)));na(zr(Fn,{get width(){return m(Re)},height:p(()=>window.innerHeight),get scaleX(){return m(k)},get scaleY(){return m(k)},get x(){return m(w),p(()=>m(w).x)},get y(){return m(w),p(()=>m(w).y)},children:(V,Ue)=>{Xr(V,{children:(ze,dt)=>{var ft=Ae(),it=he(ft);mi(it,1,()=>(m(r),p(()=>Object.entries(m(r)))),ui,(Ne,pt)=>{var me=_s(()=>ks(m(pt),2));let oe=()=>m(me)[0],vt=()=>m(me)[1];{let Ii=ae(()=>(m(n),oe(),p(()=>m(n)[oe()]?.x||0))),Oi=ae(()=>(m(n),oe(),p(()=>m(n)[oe()]?.y||0)));Ct(Ne,{get x(){return m(Ii)},get y(){return m(Oi)},children:(Li,Ee)=>{var we=No(),Fe=he(we);Si(Fe,{x:0,y:0,get width(){return S(x),p(()=>x.PROFESSION_HEADER_WIDTH)},get height(){return S(x),p(()=>x.PROFESSION_HEADER_HEIGHT)},get fill(){return S(F),p(()=>F.PROFESSION_HEADER)}});var ii=U(Fe,2);{var Gi=Oe=>{const P=ae(()=>(m(B),oe(),p(()=>m(B)[D.professions[oe()]])));$i(Oe,{get image(){return m(P)},get x(){return S(x),p(()=>x.PROFESSION_ICON_MARGIN)},get y(){return S(x),p(()=>x.PROFESSION_ICON_MARGIN)},get width(){return S(x),p(()=>x.PROFESSION_ICON_SIZE)},get height(){return S(x),p(()=>x.PROFESSION_ICON_SIZE)}})},Pt=Oe=>{var P=Bo(),ai=he(P);Si(ai,{get x(){return S(x),p(()=>x.PROFESSION_ICON_MARGIN)},get y(){return S(x),p(()=>x.PROFESSION_ICON_MARGIN)},get width(){return S(x),p(()=>x.PROFESSION_ICON_SIZE)},get height(){return S(x),p(()=>x.PROFESSION_ICON_SIZE)},get fill(){return S(F),p(()=>F.PLACEHOLDER_BACKGROUND)},rx:5});var Ni=U(ai,2);{let Fi=ae(()=>(oe(),p(()=>oe().charAt(0))));ve(Ni,{get text(){return m(Fi)},get x(){return S(L),p(()=>L.PLACEHOLDER_TEXT_X)},get y(){return S(L),p(()=>L.PLACEHOLDER_TEXT_Y)},get color(){return S(F),p(()=>F.TEXT_WHITE)},get fontSize(){return S(X),p(()=>X.PROFESSION_HEADER)},textAnchor:"middle",fontWeight:"bold"})}Q(Oe,P)};le(ii,Oe=>{oe(),m(B),p(()=>D.professions[oe()]&&m(B)[D.professions[oe()]])?Oe(Gi):Oe(Pt,!1)})}var _t=U(ii,2);ve(_t,{get text(){return oe()},get x(){return S(L),p(()=>L.PROFESSION_TEXT_X)},get y(){return S(L),p(()=>L.PROFESSION_TEXT_Y)},get color(){return S(F),p(()=>F.TEXT_WHITE)},get fontSize(){return S(X),p(()=>X.PROFESSION_HEADER)}});var Bt=U(_t,2);mi(Bt,1,vt,ui,(Oe,P,ai)=>{const Ni=ae(()=>(S(x),p(()=>x.PROFESSION_HEADER_HEIGHT+ai*x.RECIPE_CARD_SPACING)));Ct(Oe,{x:0,get y(){return m(Ni)},children:(Fi,Ho)=>{var Sa=Go(),Ca=he(Sa);{let De=ae(()=>(m(P),S(F),p(()=>m(P).craftingTimes.missingLevel>0?F.BORDER_MISSING_LEVEL:m(P).canCraft?F.BORDER_CRAFTABLE:F.BORDER_DEFAULT))),It=ae(()=>(m(P),S(F),p(()=>m(P).craftingTimes.missingLevel>0||m(P).canCraft?F.BORDER_WIDTH_CRAFTABLE:F.BORDER_WIDTH_DEFAULT)));Si(Ca,{x:0,y:0,get width(){return S(x),p(()=>x.RECIPE_CARD_WIDTH)},get height(){return S(x),p(()=>x.RECIPE_CARD_HEIGHT)},get fill(){return S(F),p(()=>F.RECIPE_CARD_BACKGROUND)},get stroke(){return m(De)},get strokeWidth(){return m(It)}})}var wa=U(Ca,2);{var Hn=De=>{const It=ae(()=>(m(B),m(P),p(()=>m(B)[D.materials[m(P).output]])));var Ot=Ae(),ni=he(Ot);{var si=kt=>{$i(kt,{get image(){return m(It)},get x(){return S(x),p(()=>x.OUTPUT_ICON_MARGIN)},get y(){return S(x),p(()=>x.OUTPUT_ICON_MARGIN)},get width(){return S(x),p(()=>x.OUTPUT_ICON_SIZE)},get height(){return S(x),p(()=>x.OUTPUT_ICON_SIZE)}})};le(ni,kt=>{m(It)&&kt(si)})}Q(De,Ot)};le(wa,De=>{m(P),p(()=>D.materials[m(P).output])&&De(Hn)})}var ba=U(wa,2);Ct(ba,{get x(){return S(L),p(()=>L.RECIPE_INFO_X)},get y(){return S(L),p(()=>L.RECIPE_INFO_Y)},children:(De,It)=>{var Ot=Lo(),ni=he(Ot);ve(ni,{get text(){return m(P),p(()=>m(P).output)},x:0,get y(){return S(L),p(()=>L.RECIPE_NAME_Y)},get fontSize(){return S(X),p(()=>X.RECIPE_NAME)}});var si=U(ni,2);ve(si,{text:"x1",x:0,get y(){return S(L),p(()=>L.RECIPE_AMOUNT_Y)},get fontSize(){return S(X),p(()=>X.RECIPE_OUTPUT)}});var kt=U(si,2);Ct(kt,{get y(){return S(L),p(()=>L.CRAFTING_TIMES_Y)},children:(Di,Yn)=>{var Lt=Io(),ri=he(Lt);{var Mi=Z=>{{let xe=ae(()=>(m(P),p(()=>`Need Lv${m(P).craftingTimes.missingLevel+N(m(P).requirements.profession.name.toLowerCase())} more`)));ve(Z,{get text(){return m(xe)},get x(){return S(L),p(()=>L.CRAFTING_STATUS_X_LEFT)},y:0,get fontSize(){return S(X),p(()=>X.CRAFTING_STATUS)},get fill(){return S(F),p(()=>F.CRAFTING_MISSING_LEVEL)}})}},Hi=Z=>{var xe=Ae(),Le=he(xe);{var Ft=Ke=>{{let yt=ae(()=>(m(P),p(()=>`Normal: x${m(P).craftingTimes.normal}`)));ve(Ke,{get text(){return m(yt)},get x(){return S(L),p(()=>L.CRAFTING_STATUS_X_LEFT)},y:0,get fontSize(){return S(X),p(()=>X.CRAFTING_STATUS)},get fill(){return S(F),p(()=>F.CRAFTING_NORMAL)}})}};le(Le,Ke=>{m(P),p(()=>m(P).craftingTimes.normal>0)&&Ke(Ft)},!0)}Q(Z,xe)};le(ri,Z=>{m(P),p(()=>m(P).craftingTimes.missingLevel>0)?Z(Mi):Z(Hi,!1)})}var Me=U(ri,2);{var at=Z=>{{let xe=ae(()=>(m(P),p(()=>`Current: Lv${N(m(P).requirements.profession.name.toLowerCase())}`)));ve(Z,{get text(){return m(xe)},get x(){return S(L),p(()=>L.CRAFTING_STATUS_X_RIGHT)},y:0,get fontSize(){return S(X),p(()=>X.CRAFTING_STATUS)},get fill(){return S(F),p(()=>F.CRAFTING_CURRENT_LEVEL)}})}},Gt=Z=>{var xe=Ae(),Le=he(xe);{var Ft=Ke=>{{let yt=ae(()=>(m(P),p(()=>`Fine: x${m(P).craftingTimes.fine}`)));ve(Ke,{get text(){return m(yt)},get x(){return S(L),p(()=>L.CRAFTING_STATUS_X_RIGHT)},y:0,get fontSize(){return S(X),p(()=>X.CRAFTING_STATUS)},get fill(){return S(F),p(()=>F.CRAFTING_FINE)}})}};le(Le,Ke=>{m(P),p(()=>m(P).craftingTimes.fine>0)&&Ke(Ft)},!0)}Q(Z,xe)};le(Me,Z=>{m(P),p(()=>m(P).craftingTimes.missingLevel>0)?Z(at):Z(Gt,!1)})}var Nt=U(Me,2);{var ge=Z=>{ve(Z,{text:"No materials",get x(){return S(L),p(()=>L.CRAFTING_STATUS_X_LEFT)},y:0,get fontSize(){return S(X),p(()=>X.CRAFTING_STATUS)},get fill(){return S(F),p(()=>F.CRAFTING_NO_MATERIALS)}})};le(Nt,Z=>{m(P),p(()=>m(P).craftingTimes.missingLevel===0&&m(P).craftingTimes.normal===0&&m(P).craftingTimes.fine===0)&&Z(ge)})}Q(Di,Lt)},$$slots:{default:!0}});var qn=U(kt,2);Ct(qn,{get y(){return S(L),p(()=>L.MATERIALS_Y)},children:(Di,Yn)=>{var Lt=Ae(),ri=he(Lt);{var Mi=Me=>{var at=Ae(),Gt=he(at);mi(Gt,1,()=>(m(P),p(()=>m(P).requirements.materials)),ui,(Nt,ge,Z)=>{const xe=ae(()=>(S(x),p(()=>Z*x.MATERIAL_ICON_SPACING))),Le=ae(()=>(m(P),m(ge),p(()=>m(P).inventoryMap[fe(m(ge).name)]||{normal:0,fine:0})));Ct(Nt,{get x(){return m(xe)},get y(){return S(L),p(()=>L.MATERIAL_Y_OFFSET)},children:(Ft,Ke)=>{var yt=Oo(),Ea=he(yt);{var Xn=nt=>{const oi=ae(()=>(m(B),m(ge),p(()=>m(B)[D.materials[m(ge).name]])));var xa=Ae(),zn=he(xa);{var Kn=Wi=>{$i(Wi,{get image(){return m(oi)},x:0,y:0,get width(){return S(x),p(()=>x.MATERIAL_ICON_SIZE)},get height(){return S(x),p(()=>x.MATERIAL_ICON_SIZE)}})};le(zn,Wi=>{m(oi)&&Wi(Kn)})}Q(nt,xa)};le(Ea,nt=>{m(ge),p(()=>D.materials[m(ge).name])&&nt(Xn)})}var Aa=U(Ea,2);ve(Aa,{get text(){return m(ge),p(()=>m(ge).name)},x:0,get y(){return S(L),p(()=>L.MATERIAL_TEXT_Y)},get fontSize(){return S(X),p(()=>X.MATERIAL_NAME)},textAnchor:"middle"});var Ra=U(Aa,2);{let nt=ae(()=>(m(ge),p(()=>`x${m(ge).amount}`)));ve(Ra,{get text(){return m(nt)},x:0,get y(){return S(L),p(()=>L.MATERIAL_AMOUNT_Y)},get fontSize(){return S(X),p(()=>X.MATERIAL_AMOUNT)},textAnchor:"middle",fontWeight:"bold"})}var Un=U(Ra,2);{let nt=ae(()=>(S(m(Le)),p(()=>`have ${m(Le).normal}N / ${m(Le).fine}F`))),oi=ae(()=>(S(m(Le)),m(ge),S(F),p(()=>m(Le).normal>=m(ge).amount?F.AVAILABILITY_CAN_CRAFT:m(Le).fine>=m(ge).amount?F.AVAILABILITY_CAN_CRAFT_FINE:F.AVAILABILITY_CANNOT_CRAFT)));ve(Un,{get text(){return m(nt)},x:0,get y(){return S(L),p(()=>L.MATERIAL_AVAILABILITY_Y)},get fontSize(){return S(X),p(()=>X.MATERIAL_AVAILABILITY)},textAnchor:"middle",get fill(){return m(oi)}})}Q(Ft,yt)},$$slots:{default:!0}})}),Q(Me,at)},Hi=Me=>{var at=Ae(),Gt=he(at);{var Nt=Z=>{ve(Z,{text:"No materials defined",x:0,get y(){return S(L),p(()=>L.MATERIAL_Y_OFFSET)},get fontSize(){return S(X),p(()=>X.MATERIAL_NAME)},fill:"#999"})},ge=Z=>{ve(Z,{text:"No materials property",x:0,get y(){return S(L),p(()=>L.MATERIAL_Y_OFFSET)},get fontSize(){return S(X),p(()=>X.MATERIAL_NAME)},fill:"#999"})};le(Gt,Z=>{m(P),p(()=>m(P).requirements.materials)?Z(Nt):Z(ge,!1)},!0)}Q(Me,at)};le(ri,Me=>{m(P),p(()=>m(P).requirements.materials&&m(P).requirements.materials.length>0)?Me(Mi):Me(Hi,!1)})}Q(Di,Lt)},$$slots:{default:!0}}),Q(De,Ot)},$$slots:{default:!0}});var Ta=U(ba,2);Si(Ta,{get x(){return S(x),p(()=>x.LEVEL_INDICATOR_X)},get y(){return S(x),p(()=>x.LEVEL_INDICATOR_Y)},get width(){return S(x),p(()=>x.LEVEL_INDICATOR_WIDTH)},get height(){return S(x),p(()=>x.LEVEL_INDICATOR_HEIGHT)},get fill(){return S(F),p(()=>F.LEVEL_INDICATOR_BACKGROUND)}});var Wn=U(Ta,2);{let De=ae(()=>(m(P),p(()=>`Lv${m(P).requirements.profession.level}`)));ve(Wn,{get text(){return m(De)},get x(){return S(L),p(()=>L.LEVEL_TEXT_X)},get y(){return S(L),p(()=>L.LEVEL_TEXT_Y)},get fontSize(){return S(X),p(()=>X.LEVEL_INDICATOR)},textAnchor:"middle",get color(){return S(F),p(()=>F.LEVEL_INDICATOR_TEXT)}})}Q(Fi,Sa)},$$slots:{default:!0}})}),Q(Li,we)},$$slots:{default:!0}})}}),Q(ze,ft)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),V=>te(c,V),()=>m(c))}ne(tt),na(tt,Re=>te(f,Re),()=>m(f));var Dn=U(tt,2);{var Mn=Re=>{var V=Do(),Ue=ce(V),ze=U(ce(Ue),4);ys(ze);var dt=U(ze,2);{var ft=me=>{var oe=Fo(),vt=ce(oe,!0);ne(oe),ci(()=>hi(vt,m(u))),Q(me,oe)};le(dt,me=>{m(u)&&me(ft)})}var it=U(dt,2),Ne=ce(it),pt=U(Ne,2);ne(it),ne(Ue),ne(V),As(ze,()=>m(h),me=>te(h,me)),He("click",Ne,()=>te(l,!1)),He("click",pt,K),He("click",V,me=>{me.target===me.currentTarget&&te(l,!1)}),He("keydown",V,me=>{(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),te(l,!1))}),Q(Re,V)};le(Dn,Re=>{m(l)&&Re(Mn)})}ne(T),He("click",Y,()=>te(l,!0)),He("click",M,re),Rs(Xe,()=>m(ee),Re=>te(ee,Re)),He("wheel",tt,Ce),He("mousedown",tt,Te),He("keydown",tt,Se),Q(C,T)};le(Pi,C=>{C(Bi)})}Q(a,et),ct()}export{$o as component};
